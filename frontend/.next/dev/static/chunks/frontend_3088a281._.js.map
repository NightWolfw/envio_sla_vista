{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/client.ts"],"sourcesContent":["\"use client\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL ?? \"http://localhost:5000/api\";\n\ntype Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n\nasync function request<T>(path: string, method: Method, body?: unknown): Promise<T> {\n  const res = await fetch(`${API_BASE}${path}`, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: body ? JSON.stringify(body) : undefined\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || `Erro ${res.status}`);\n  }\n\n  if (res.status === 204) {\n    return {} as T;\n  }\n\n  return res.json() as Promise<T>;\n}\n\nexport const clientApi = {\n  put: <T>(path: string, body?: unknown) => request<T>(path, \"PUT\", body),\n  post: <T>(path: string, body?: unknown) => request<T>(path, \"POST\", body),\n  delete: <T>(path: string, body?: unknown) => request<T>(path, \"DELETE\", body)\n};\n"],"names":[],"mappings":";;;;AAEiB;AAFjB;AAEA,MAAM,WAAW,uLAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAIzD,eAAe,QAAW,IAAY,EAAE,MAAc,EAAE,IAAc;IACpE,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C;QACA,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;IACtC;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,QAAQ,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;IAC9C;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACtB,OAAO,CAAC;IACV;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,YAAY;IACvB,KAAK,CAAI,MAAc,OAAmB,QAAW,MAAM,OAAO;IAClE,MAAM,CAAI,MAAc,OAAmB,QAAW,MAAM,QAAQ;IACpE,QAAQ,CAAI,MAAc,OAAmB,QAAW,MAAM,UAAU;AAC1E"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/app/sla/preview.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport type { Grupo } from \"../../lib/api\";\nimport { clientApi } from \"../../lib/client\";\n\ntype Props = {\n  grupos: Grupo[];\n};\n\ntype PreviewResponse = {\n  grupo_nome: string;\n  mensagem: string;\n  stats: Record<string, number>;\n};\n\nexport default function SlaPreviewClient({ grupos }: Props) {\n  const [resultado, setResultado] = useState<PreviewResponse | null>(null);\n  const [erro, setErro] = useState<string | null>(null);\n\n  async function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    const form = new FormData(event.currentTarget);\n    const grupoId = Number(form.get(\"grupo_id\"));\n    try {\n      const resposta = await clientApi.post<PreviewResponse>(`/sla/preview/${grupoId}`, {\n        tipo_envio: form.get(\"tipo_envio\"),\n        data_envio: form.get(\"data_envio\"),\n        hora_inicio: form.get(\"hora_inicio\"),\n        dia_offset_inicio: Number(form.get(\"dia_offset_inicio\") ?? 0),\n        hora_fim: form.get(\"hora_fim\"),\n        dia_offset_fim: Number(form.get(\"dia_offset_fim\") ?? 0)\n      });\n      setResultado(resposta);\n      setErro(null);\n    } catch (error: any) {\n      setErro(error.message ?? \"Erro ao gerar preview\");\n      setResultado(null);\n    }\n  }\n\n  return (\n    <div style={{ display: \"grid\", gap: \"1.5rem\" }}>\n      <form onSubmit={handleSubmit} className=\"grid\" style={{ gap: \"0.75rem\" }}>\n        <label>\n          Grupo\n          <select name=\"grupo_id\" required defaultValue=\"\">\n            <option value=\"\" disabled>\n              Selecione\n            </option>\n            {grupos\n              .filter((g) => !!g.cr)\n              .map((grupo) => (\n                <option key={grupo.id} value={grupo.id}>\n                  {grupo.nome_grupo} ({grupo.cr})\n                </option>\n              ))}\n          </select>\n        </label>\n        <label>\n          Tipo de envio\n          <select name=\"tipo_envio\" defaultValue=\"resultados\">\n            <option value=\"resultados\">Resultados</option>\n            <option value=\"programadas\">Programadas</option>\n          </select>\n        </label>\n        <label>\n          Data de envio\n          <input type=\"datetime-local\" name=\"data_envio\" required />\n        </label>\n        <label>\n          Hora início\n          <input type=\"time\" name=\"hora_inicio\" required />\n        </label>\n        <label>\n          Offset início (dias)\n          <input type=\"number\" name=\"dia_offset_inicio\" defaultValue={0} />\n        </label>\n        <label>\n          Hora fim\n          <input type=\"time\" name=\"hora_fim\" required />\n        </label>\n        <label>\n          Offset fim (dias)\n          <input type=\"number\" name=\"dia_offset_fim\" defaultValue={0} />\n        </label>\n        <button type=\"submit\">Gerar preview</button>\n      </form>\n\n      {erro && <p>{erro}</p>}\n      {resultado && (\n        <div className=\"panel\">\n          <h3>Mensagem gerada ({resultado.grupo_nome})</h3>\n          <pre style={{ whiteSpace: \"pre-wrap\" }}>{resultado.mensagem}</pre>\n          <h4>Indicadores</h4>\n          <ul>\n            {Object.entries(resultado.stats).map(([key, value]) => (\n              <li key={key}>\n                {key}: {value}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;;;AAJA;;;AAgBe,SAAS,iBAAiB,EAAE,MAAM,EAAS;;IACxD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAyB;IACnE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qLAAQ,EAAgB;IAEhD,eAAe,aAAa,KAAuC;QACjE,MAAM,cAAc;QACpB,MAAM,OAAO,IAAI,SAAS,MAAM,aAAa;QAC7C,MAAM,UAAU,OAAO,KAAK,GAAG,CAAC;QAChC,IAAI;YACF,MAAM,WAAW,MAAM,yIAAS,CAAC,IAAI,CAAkB,CAAC,aAAa,EAAE,SAAS,EAAE;gBAChF,YAAY,KAAK,GAAG,CAAC;gBACrB,YAAY,KAAK,GAAG,CAAC;gBACrB,aAAa,KAAK,GAAG,CAAC;gBACtB,mBAAmB,OAAO,KAAK,GAAG,CAAC,wBAAwB;gBAC3D,UAAU,KAAK,GAAG,CAAC;gBACnB,gBAAgB,OAAO,KAAK,GAAG,CAAC,qBAAqB;YACvD;YACA,aAAa;YACb,QAAQ;QACV,EAAE,OAAO,OAAY;YACnB,QAAQ,MAAM,OAAO,IAAI;YACzB,aAAa;QACf;IACF;IAEA,qBACE,yMAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,KAAK;QAAS;;0BAC3C,yMAAC;gBAAK,UAAU;gBAAc,WAAU;gBAAO,OAAO;oBAAE,KAAK;gBAAU;;kCACrE,yMAAC;;4BAAM;0CAEL,yMAAC;gCAAO,MAAK;gCAAW,QAAQ;gCAAC,cAAa;;kDAC5C,yMAAC;wCAAO,OAAM;wCAAG,QAAQ;kDAAC;;;;;;oCAGzB,OACE,MAAM,CAAC,CAAC,IAAM,CAAC,CAAC,EAAE,EAAE,EACpB,GAAG,CAAC,CAAC,sBACJ,yMAAC;4CAAsB,OAAO,MAAM,EAAE;;gDACnC,MAAM,UAAU;gDAAC;gDAAG,MAAM,EAAE;gDAAC;;2CADnB,MAAM,EAAE;;;;;;;;;;;;;;;;;kCAM7B,yMAAC;;4BAAM;0CAEL,yMAAC;gCAAO,MAAK;gCAAa,cAAa;;kDACrC,yMAAC;wCAAO,OAAM;kDAAa;;;;;;kDAC3B,yMAAC;wCAAO,OAAM;kDAAc;;;;;;;;;;;;;;;;;;kCAGhC,yMAAC;;4BAAM;0CAEL,yMAAC;gCAAM,MAAK;gCAAiB,MAAK;gCAAa,QAAQ;;;;;;;;;;;;kCAEzD,yMAAC;;4BAAM;0CAEL,yMAAC;gCAAM,MAAK;gCAAO,MAAK;gCAAc,QAAQ;;;;;;;;;;;;kCAEhD,yMAAC;;4BAAM;0CAEL,yMAAC;gCAAM,MAAK;gCAAS,MAAK;gCAAoB,cAAc;;;;;;;;;;;;kCAE9D,yMAAC;;4BAAM;0CAEL,yMAAC;gCAAM,MAAK;gCAAO,MAAK;gCAAW,QAAQ;;;;;;;;;;;;kCAE7C,yMAAC;;4BAAM;0CAEL,yMAAC;gCAAM,MAAK;gCAAS,MAAK;gCAAiB,cAAc;;;;;;;;;;;;kCAE3D,yMAAC;wBAAO,MAAK;kCAAS;;;;;;;;;;;;YAGvB,sBAAQ,yMAAC;0BAAG;;;;;;YACZ,2BACC,yMAAC;gBAAI,WAAU;;kCACb,yMAAC;;4BAAG;4BAAkB,UAAU,UAAU;4BAAC;;;;;;;kCAC3C,yMAAC;wBAAI,OAAO;4BAAE,YAAY;wBAAW;kCAAI,UAAU,QAAQ;;;;;;kCAC3D,yMAAC;kCAAG;;;;;;kCACJ,yMAAC;kCACE,OAAO,OAAO,CAAC,UAAU,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC,KAAK,MAAM,iBAChD,yMAAC;;oCACE;oCAAI;oCAAG;;+BADD;;;;;;;;;;;;;;;;;;;;;;AASvB;GA1FwB;KAAA"}}]
}