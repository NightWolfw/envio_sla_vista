{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/client.ts"],"sourcesContent":["\"use client\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL ?? \"http://localhost:5000/api\";\n\ntype Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n\nasync function request<T>(path: string, method: Method, body?: unknown): Promise<T> {\n  const res = await fetch(`${API_BASE}${path}`, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: body ? JSON.stringify(body) : undefined\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || `Erro ${res.status}`);\n  }\n\n  if (res.status === 204) {\n    return {} as T;\n  }\n\n  return res.json() as Promise<T>;\n}\n\nexport const clientApi = {\n  put: <T>(path: string, body?: unknown) => request<T>(path, \"PUT\", body),\n  post: <T>(path: string, body?: unknown) => request<T>(path, \"POST\", body),\n  delete: <T>(path: string, body?: unknown) => request<T>(path, \"DELETE\", body)\n};\n"],"names":[],"mappings":";;;;AAEiB;AAFjB;AAEA,MAAM,WAAW,uLAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAIzD,eAAe,QAAW,IAAY,EAAE,MAAc,EAAE,IAAc;IACpE,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C;QACA,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;IACtC;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,QAAQ,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;IAC9C;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACtB,OAAO,CAAC;IACV;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,YAAY;IACvB,KAAK,CAAI,MAAc,OAAmB,QAAW,MAAM,OAAO;IAClE,MAAM,CAAI,MAAc,OAAmB,QAAW,MAAM,QAAQ;IACpE,QAAQ,CAAI,MAAc,OAAmB,QAAW,MAAM,UAAU;AAC1E"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/app/agendamentos/table.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport type { Agendamento, Grupo } from \"../../lib/api\";\nimport { clientApi } from \"../../lib/client\";\n\ntype Props = {\n  agendamentos: Agendamento[];\n  grupos: Grupo[];\n};\n\nexport default function AgendamentosClient({ agendamentos, grupos }: Props) {\n  const [message, setMessage] = useState<string | null>(null);\n\n  async function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    const data = new FormData(event.currentTarget);\n    const dias = (data.get(\"dias_semana\") as string)\n      .split(\",\")\n      .map((d) => d.trim())\n      .filter(Boolean);\n    try {\n      await clientApi.post(\"/agendamentos\", {\n        grupo_id: Number(data.get(\"grupo_id\")),\n        tipo_envio: data.get(\"tipo_envio\"),\n        dias_semana: dias,\n        data_envio: data.get(\"data_envio\"),\n        hora_inicio: data.get(\"hora_inicio\"),\n        dia_offset_inicio: Number(data.get(\"dia_offset_inicio\") ?? 0),\n        hora_fim: data.get(\"hora_fim\"),\n        dia_offset_fim: Number(data.get(\"dia_offset_fim\") ?? 0)\n      });\n      setMessage(\"Agendamento criado! Recarregue para visualizar.\");\n      event.currentTarget.reset();\n    } catch (err: any) {\n      setMessage(err.message ?? \"Erro ao criar agendamento\");\n    }\n  }\n\n  return (\n    <div style={{ display: \"grid\", gap: \"1.5rem\" }}>\n      <div style={{ overflowX: \"auto\" }}>\n        <table>\n          <thead>\n            <tr>\n              <th>Grupo</th>\n              <th>CR</th>\n              <th>Tipo</th>\n              <th>Dias</th>\n              <th>Horário</th>\n              <th>Ativo</th>\n            </tr>\n          </thead>\n          <tbody>\n            {agendamentos.map((agendamento) => (\n              <tr key={agendamento.id}>\n                <td>{agendamento.nome_grupo}</td>\n                <td>{agendamento.cr ?? \"—\"}</td>\n                <td>{agendamento.tipo_envio}</td>\n                <td>{agendamento.dias_semana ?? \"—\"}</td>\n                <td>\n                  {agendamento.hora_inicio} → {agendamento.hora_fim}\n                </td>\n                <td>{agendamento.ativo ? \"Sim\" : \"Não\"}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      <form className=\"panel\" onSubmit={handleSubmit}>\n        <h3>Novo agendamento</h3>\n        <div className=\"grid\" style={{ gap: \"0.75rem\" }}>\n          <label>\n            Grupo\n            <select name=\"grupo_id\" required defaultValue=\"\">\n              <option value=\"\" disabled>\n                Selecione\n              </option>\n              {grupos.map((grupo) => (\n                <option key={grupo.id} value={grupo.id}>\n                  {grupo.nome_grupo}\n                </option>\n              ))}\n            </select>\n          </label>\n          <label>\n            Tipo de envio\n            <select name=\"tipo_envio\" defaultValue=\"resultados\">\n              <option value=\"resultados\">Resultados</option>\n              <option value=\"programadas\">Programadas</option>\n            </select>\n          </label>\n          <label>\n            Dias da semana (seg,ter,...)\n            <input name=\"dias_semana\" placeholder=\"seg,ter,qua\" defaultValue=\"seg,ter,qua,qui,sex\" />\n          </label>\n          <label>\n            Data de envio\n            <input type=\"datetime-local\" name=\"data_envio\" required />\n          </label>\n          <label>\n            Hora início\n            <input type=\"time\" name=\"hora_inicio\" required />\n          </label>\n          <label>\n            Hora fim\n            <input type=\"time\" name=\"hora_fim\" required />\n          </label>\n          <label>\n            Offset início (dias)\n            <input type=\"number\" name=\"dia_offset_inicio\" defaultValue={0} />\n          </label>\n          <label>\n            Offset fim (dias)\n            <input type=\"number\" name=\"dia_offset_fim\" defaultValue={0} />\n          </label>\n          <button type=\"submit\">Criar agendamento</button>\n        </div>\n        {message && <p style={{ marginTop: \"0.75rem\" }}>{message}</p>}\n      </form>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}