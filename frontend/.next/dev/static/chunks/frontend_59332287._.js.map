{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/client.ts"],"sourcesContent":["\"use client\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL ?? \"http://localhost:5000/api\";\n\ntype Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n\nasync function request<T>(path: string, method: Method, body?: unknown): Promise<T> {\n  const res = await fetch(`${API_BASE}${path}`, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: body ? JSON.stringify(body) : undefined\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || `Erro ${res.status}`);\n  }\n\n  if (res.status === 204) {\n    return {} as T;\n  }\n\n  return res.json() as Promise<T>;\n}\n\nexport const clientApi = {\n  put: <T>(path: string, body?: unknown) => request<T>(path, \"PUT\", body),\n  post: <T>(path: string, body?: unknown) => request<T>(path, \"POST\", body),\n  delete: <T>(path: string, body?: unknown) => request<T>(path, \"DELETE\", body)\n};\n"],"names":[],"mappings":";;;;AAEiB;AAFjB;AAEA,MAAM,WAAW,uLAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAIzD,eAAe,QAAW,IAAY,EAAE,MAAc,EAAE,IAAc;IACpE,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C;QACA,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;IACtC;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,QAAQ,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;IAC9C;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACtB,OAAO,CAAC;IACV;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,YAAY;IACvB,KAAK,CAAI,MAAc,OAAmB,QAAW,MAAM,OAAO;IAClE,MAAM,CAAI,MAAc,OAAmB,QAAW,MAAM,QAAQ;IACpE,QAAQ,CAAI,MAAc,OAAmB,QAAW,MAAM,UAAU;AAC1E"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/api.ts"],"sourcesContent":["import { clientApi } from \"./client\";\n\nconst API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL ?? process.env.API_BASE_URL ?? \"http://localhost:5000/api\";\n\nasync function apiFetch<T>(path: string, init?: RequestInit): Promise<T> {\n  try {\n    const res = await fetch(`${API_BASE}${path}`, {\n      ...init,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(init?.headers ?? {})\n      },\n      cache: \"no-store\",\n      next: { revalidate: 0 }\n    });\n\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`Erro na API (${res.status}): ${text}`);\n    }\n\n    return res.json() as Promise<T>;\n  } catch (error) {\n    console.error(\"Falha ao buscar API\", error);\n    if (\n      error instanceof TypeError ||\n      (error instanceof Error && error.message.toLowerCase().includes(\"fetch failed\"))\n    ) {\n      throw new Error(\n        `NÃ£o foi possÃ­vel conectar Ã  API (${API_BASE}). Verifique se o backend FastAPI estÃ¡ rodando e se NEXT_PUBLIC_API_BASE_URL estÃ¡ configurado.`\n      );\n    }\n    throw error;\n  }\n}\n\nexport type OverviewStats = {\n  total_grupos: number;\n  total_mensagens: number;\n  total_envios: number;\n  generated_at: string;\n};\n\nexport async function getStats(): Promise<OverviewStats> {\n  return apiFetch<OverviewStats>(\"/stats\");\n}\n\nexport async function getDashboardResumo(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any; periodo: any }>(\"/dashboard/resumo\" + query);\n}\n\nexport async function getDashboardTarefas(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any[] }>(\"/dashboard/tarefas-mes\" + query);\n}\n\nexport async function getDashboardPizza(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: Record<string, number> }>(\"/dashboard/pizza\" + query);\n}\n\nexport type Grupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  envio_pdf: boolean;\n  cr?: string | null;\n  cliente?: string | null;\n  pec_01?: string | null;\n  pec_02?: string | null;\n  diretor_executivo?: string | null;\n  diretor_regional?: string | null;\n  gerente_regional?: string | null;\n  gerente?: string | null;\n  supervisor?: string | null;\n};\n\nexport async function getGrupos(): Promise<Grupo[]> {\n  return apiFetch<Grupo[]>(\"/grupos\");\n}\n\nexport async function getGrupoFiltros() {\n  return apiFetch(\"/grupos/filtros/meta\");\n}\n\nexport type Agendamento = {\n  id: number;\n  grupo_id: number;\n  nome_grupo: string;\n  cr: string | null;\n  tipo_envio: string;\n  dias_semana: string | null;\n  data_envio: string;\n  proximo_envio?: string | null;\n  hora_inicio: string;\n  dia_offset_inicio: number;\n  hora_fim: string;\n  dia_offset_fim: number;\n  ativo: boolean;\n  criado_em?: string;\n  atualizado_em?: string | null;\n  ultimo_status?: string | null;\n  ultimo_envio?: string | null;\n  ultimo_erro?: string | null;\n};\n\nexport type AgendamentoListResponse = {\n  items: Agendamento[];\n  total: number;\n  page: number;\n  page_size: number;\n};\n\nexport type AgendamentoFilters = {\n  page?: number;\n  page_size?: number;\n  tipo_envio?: string;\n  ativo?: boolean | string;\n  grupo?: string;\n  cr?: string;\n  dia?: string;\n  data_inicio?: string;\n  data_fim?: string;\n};\n\nexport type EnviarAgoraResponse = {\n  id: number;\n  status: string;\n  message: string;\n};\n\nexport type PdfLinkResponse = {\n  id: number;\n  url: string;\n};\n\nexport type PdfBulkResponse = {\n  successes: PdfLinkResponse[];\n  failures: number[];\n};\n\nexport type BulkDeleteResponse = {\n  removed: number;\n  failures: number[];\n};\n\nfunction buildQuery(params: Record<string, any>): string {\n  const query = new URLSearchParams();\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null || value === \"\") return;\n    query.set(key, String(value));\n  });\n  const text = query.toString();\n  return text ? `?${text}` : \"\";\n}\n\nexport async function getAgendamentos(filters?: AgendamentoFilters): Promise<Agendamento[]> {\n  const response = await getAgendamentosPaged(filters);\n  return response.items;\n}\n\nexport async function getAgendamentosPaged(filters?: AgendamentoFilters): Promise<AgendamentoListResponse> {\n  const query = buildQuery(filters ?? {});\n  return apiFetch<AgendamentoListResponse>(`/agendamentos${query}`);\n}\n\nexport type AgendamentoPayload = {\n  grupo_id: number;\n  tipo_envio: \"resultados\" | \"programadas\";\n  dias_semana: string[];\n  data_envio: string;\n  hora_inicio: string;\n  dia_offset_inicio: number;\n  hora_fim: string;\n  dia_offset_fim: number;\n};\n\nexport async function createAgendamento(payload: AgendamentoPayload) {\n  return clientApi.post(\"/agendamentos\", payload);\n}\n\nexport async function updateAgendamento(id: number, payload: AgendamentoPayload & { ativo?: boolean }) {\n  return clientApi.put(`/agendamentos/${id}`, payload);\n}\n\nexport async function deleteAgendamento(id: number) {\n  return clientApi.delete(`/agendamentos/${id}`);\n}\n\nexport async function cloneAgendamento(id: number) {\n  return clientApi.post<{ id: number }>(`/agendamentos/${id}/clone`);\n}\n\nexport async function pauseAgendamento(id: number) {\n  return clientApi.post<{ id: number; ativo: boolean }>(`/agendamentos/${id}/pause`);\n}\n\nexport async function resumeAgendamento(id: number) {\n  return clientApi.post<{ id: number; ativo: boolean }>(`/agendamentos/${id}/resume`);\n}\n\nexport async function sendAgendamentoNow(id: number) {\n  return clientApi.post<EnviarAgoraResponse>(`/agendamentos/${id}/send-now`);\n}\n\nexport async function generatePdfAgendamento(id: number) {\n  return clientApi.post<PdfLinkResponse>(`/agendamentos/${id}/pdf`);\n}\n\nexport async function generatePdfBulk(ids: number[]) {\n  return clientApi.post<PdfBulkResponse>(\"/agendamentos/bulk/pdf\", { ids });\n}\n\nexport async function deleteAgendamentosBulk(ids: number[]) {\n  return clientApi.delete<BulkDeleteResponse>(\"/agendamentos/bulk\", { ids });\n}\n\nexport type AgendamentoLog = {\n  id: number;\n  data_envio: string;\n  status: string;\n  mensagem_enviada: string | null;\n  resposta_api: string | null;\n  erro: string | null;\n  criado_em: string;\n  nome_grupo?: string | null;\n};\n\nexport type AgendamentoLogResponse = {\n  items: AgendamentoLog[];\n  total: number;\n  page: number;\n  page_size: number;\n};\n\nexport async function getAgendamentoLogs(agendamentoId: number, page = 1, pageSize = 10) {\n  const query = buildQuery({ page, page_size: pageSize });\n  return apiFetch<AgendamentoLogResponse>(`/agendamentos/${agendamentoId}/logs${query}`);\n}\n\nexport type Mensagem = {\n  id: number;\n  mensagem: string;\n  grupos_ids: string[];\n  tipo_recorrencia: string;\n  dias_semana: number[] | null;\n  horario: string;\n  data_inicio: string;\n  data_fim: string | null;\n  ativo: boolean;\n};\n\nexport async function getMensagens(params?: string): Promise<Mensagem[]> {\n  const suffix = params ? `?${params}` : \"\";\n  return apiFetch<Mensagem[]>(`/mensagens${suffix}`);\n}\n\nexport async function getSlaPreview(grupoId: number, payload: any) {\n  return apiFetch(`/sla/preview/${grupoId}`, {\n    method: \"POST\",\n    body: JSON.stringify(payload)\n  });\n}\n\nexport type SlaTemplate = {\n  resultados: string;\n  programadas: string;\n};\n\nexport async function fetchSlaTemplate(): Promise<SlaTemplate> {\n  return apiFetch<SlaTemplate>(\"/sla/template\");\n}\n\nexport async function updateSlaTemplate(payload: SlaTemplate): Promise<SlaTemplate> {\n  return clientApi.put<SlaTemplate>(\"/sla/template\", payload);\n}\n\nexport type EnvioGrupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  cr?: string | null;\n};\n\nexport async function getEnvioGrupos(): Promise<EnvioGrupo[]> {\n  return apiFetch<EnvioGrupo[]>(\"/envio/grupos\");\n}\n\nexport type EvolutionGroup = {\n  group_id: string;\n  nome: string;\n  cr?: string | null;\n};\n\nexport type EvolutionGroupsResponse = {\n  total: number;\n  page: number;\n  page_size: number;\n  grupos: EvolutionGroup[];\n};\n\nexport async function getEvolutionGroups(page = 1, pageSize = 25): Promise<EvolutionGroupsResponse> {\n  return apiFetch(`/evolution/groups?page=${page}&page_size=${pageSize}`);\n}\n\nexport async function getAllEvolutionGroups(): Promise<EvolutionGroupsResponse> {\n  return apiFetch(\"/evolution/groups/all\");\n}\n\nexport async function importEvolutionGroups(grupos: EvolutionGroup[]) {\n  return clientApi.post(\"/evolution/import\", { grupos });\n}\n\nexport type GrupoCrItem = {\n  id: number;\n  nome_grupo: string;\n  cr: string;\n};\n\nexport async function getGroupsWithCR(): Promise<GrupoCrItem[]> {\n  return apiFetch<GrupoCrItem[]>(\"/grupos/com-cr\");\n}\n\nexport async function syncGroupStructure(grupoId: number) {\n  return clientApi.post(`/grupos/${grupoId}/sync-estrutura`);\n}\n\nexport async function deleteGroups(ids: number[]) {\n  return clientApi.delete<{ removidos: number }>(\"/grupos\", { ids });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/EvolutionModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { getAllEvolutionGroups, type EvolutionGroup, importEvolutionGroups } from \"../lib/api\";\nimport { useRouter } from \"next/navigation\";\n\ntype Props = {\n  onClose: () => void;\n};\n\ntype SelectState = {\n  [group_id: string]: {\n    selected: boolean;\n    cr: string;\n  };\n};\n\nexport default function EvolutionModal({ onClose }: Props) {\n  const router = useRouter();\n  const [page, setPage] = useState(1);\n  const [pageSize] = useState(25);\n  const [allItems, setAllItems] = useState<EvolutionGroup[]>([]);\n  const [state, setState] = useState<SelectState>({});\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(true);\n  const [status, setStatus] = useState<string | null>(null);\n  const [importProgress, setImportProgress] = useState(0);\n  const [importTotal, setImportTotal] = useState(0);\n  const [importing, setImporting] = useState(false);\n  const [loadProgress, setLoadProgress] = useState(0);\n\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      setLoadProgress(5);\n      setLoading(true);\n      setStatus(null);\n      try {\n        const interval = setInterval(() => {\n          setLoadProgress((prev) => Math.min(prev + 10, 90));\n        }, 150);\n        const data = await getAllEvolutionGroups();\n        clearInterval(interval);\n        if (!cancelled) {\n          setAllItems(data.grupos);\n          setState((prev) => {\n            const next: SelectState = {};\n            data.grupos.forEach((grupo) => {\n              if (prev[grupo.group_id]) {\n                next[grupo.group_id] = prev[grupo.group_id];\n              }\n            });\n            return next;\n          });\n          setLoadProgress(100);\n        }\n      } catch (error: any) {\n        if (!cancelled) setStatus(error.message ?? \"Erro ao carregar grupos da Evolution.\");\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  const filtered = useMemo(() => {\n    const text = search.toLowerCase().trim();\n    if (!text) return allItems;\n    return allItems.filter((grupo) => grupo.nome.toLowerCase().includes(text));\n  }, [allItems, search]);\n\n  useEffect(() => {\n    setPage(1);\n  }, [search]);\n\n  const maxPage = Math.max(Math.ceil(filtered.length / pageSize), 1);\n\n  useEffect(() => {\n    if (page > maxPage) {\n      setPage(maxPage);\n    }\n  }, [maxPage, page]);\n\n  const paginatedItems = useMemo(() => {\n    const start = (page - 1) * pageSize;\n    return filtered.slice(start, start + pageSize);\n  }, [filtered, page, pageSize]);\n\n  function toggleSelect(group: EvolutionGroup) {\n    setState((prev) => ({\n      ...prev,\n      [group.group_id]: {\n        selected: !prev[group.group_id]?.selected,\n        cr: prev[group.group_id]?.cr ?? \"\"\n      }\n    }));\n  }\n\n  function updateCr(group_id: string, cr: string) {\n    setState((prev) => ({\n      ...prev,\n      [group_id]: {\n        selected: prev[group_id]?.selected ?? false,\n        cr\n      }\n    }));\n  }\n\n  const hasSelection = useMemo(() => Object.values(state).some((item) => item.selected), [state]);\n\n  async function handleImport() {\n    const selecionados = Object.entries(state)\n      .filter(([, info]) => info.selected)\n      .map(([group_id, info]) => ({\n        group_id,\n        nome: allItems.find((i) => i.group_id === group_id)?.nome ?? \"\",\n        cr: info.cr || null\n      }));\n\n    if (!selecionados.length) {\n      setStatus(\"Selecione pelo menos um grupo.\");\n      return;\n    }\n\n    try {\n      setImporting(true);\n      setImportTotal(selecionados.length);\n      setImportProgress(0);\n      for (let i = 0; i < selecionados.length; i += 1) {\n        await importEvolutionGroups([selecionados[i]]);\n        setImportProgress(i + 1);\n        setStatus(`Importando ${i + 1}/${selecionados.length}...`);\n      }\n      setStatus(\"ImportaÃ§Ã£o concluÃ­da! Atualizando lista...\");\n      router.refresh();\n      setTimeout(onClose, 1200);\n    } catch (error: any) {\n      setStatus(error.message ?? \"Erro ao importar grupos.\");\n    } finally {\n      setImporting(false);\n    }\n  }\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal\">\n        <div className=\"modal-header\">\n          <h3>Sincronizar grupos da Evolution</h3>\n          <button type=\"button\" className=\"secondary\" onClick={onClose}>\n            Fechar\n          </button>\n        </div>\n\n        <div style={{ display: \"flex\", gap: \"0.75rem\", marginBottom: \"1rem\" }}>\n          <div style={{ flex: 1, position: \"relative\" }}>\n            <input\n              placeholder=\"Buscar grupos por nome\"\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              style={{ paddingLeft: \"2.5rem\" }}\n            />\n            <span\n              style={{\n                position: \"absolute\",\n                left: \"0.9rem\",\n                top: \"50%\",\n                transform: \"translateY(-50%)\",\n                color: \"var(--text-muted)\"\n              }}\n            >\n              ðŸ”Ž\n            </span>\n          </div>\n          <div style={{ display: \"flex\", alignItems: \"center\", gap: \"0.5rem\" }}>\n            <button type=\"button\" className=\"secondary\" disabled={page <= 1} onClick={() => setPage((p) => Math.max(1, p - 1))}>\n              â—€\n            </button>\n            <span>\n              PÃ¡gina {page} / {maxPage}\n            </span>\n            <button\n              type=\"button\"\n              className=\"secondary\"\n              disabled={page >= maxPage}\n              onClick={() => setPage((p) => Math.min(maxPage, p + 1))}\n            >\n              â–¶\n            </button>\n          </div>\n        </div>\n\n        <div style={{ maxHeight: \"320px\", overflowY: \"auto\", border: \"1px solid var(--border)\", borderRadius: \"8px\" }}>\n          {loading ? (\n            <div className=\"progress-wrapper\" style={{ padding: \"1rem\" }}>\n              <div className=\"progress-bar\">\n                <div className=\"progress-bar-fill\" style={{ width: `${loadProgress}%` }} />\n              </div>\n              <span>{loadProgress}%</span>\n            </div>\n          ) : (\n            <table>\n              <thead>\n                <tr>\n                  <th></th>\n                  <th>Nome</th>\n                  <th>Group ID</th>\n                  <th>CR</th>\n                </tr>\n              </thead>\n              <tbody>\n                {paginatedItems.map((grupo) => (\n                  <tr key={grupo.group_id}>\n                    <td>\n                      <input\n                        type=\"checkbox\"\n                        checked={state[grupo.group_id]?.selected ?? false}\n                        onChange={() => toggleSelect(grupo)}\n                      />\n                    </td>\n                    <td>{grupo.nome}</td>\n                    <td>{grupo.group_id}</td>\n                    <td>\n                      <input\n                        placeholder=\"Informe o CR\"\n                        value={state[grupo.group_id]?.cr ?? \"\"}\n                        onChange={(e) => updateCr(grupo.group_id, e.target.value)}\n                      />\n                    </td>\n                  </tr>\n                ))}\n                {!paginatedItems.length && (\n                  <tr>\n                    <td colSpan={4} style={{ textAlign: \"center\", padding: \"1rem\" }}>\n                      Nenhum grupo encontrado.\n                    </td>\n                  </tr>\n                )}\n              </tbody>\n            </table>\n          )}\n        </div>\n\n        {status && <p style={{ marginTop: \"0.75rem\" }}>{status}</p>}\n        {importTotal > 0 && (\n          <div className=\"progress-wrapper\">\n            <div className=\"progress-bar\">\n              <div className=\"progress-bar-fill\" style={{ width: `${Math.round((importProgress / importTotal) * 100)}%` }} />\n            </div>\n            <span>\n              {importProgress}/{importTotal}\n            </span>\n          </div>\n        )}\n\n        <div style={{ display: \"flex\", justifyContent: \"flex-end\", gap: \"0.75rem\", marginTop: \"1rem\" }}>\n          <button type=\"button\" className=\"secondary\" onClick={onClose}>\n            Cancelar\n          </button>\n          <button\n            type=\"button\"\n            onClick={handleImport}\n            disabled={importing || loading || importTotal > 0 || !hasSelection}\n          >\n            {importing ? \"Importando...\" : \"Importar selecionados\"}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBe,SAAS,eAAe,EAAE,OAAO,EAAS;;IACvD,MAAM,SAAS,IAAA,8JAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,qLAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,GAAG,IAAA,qLAAQ,EAAC;IAC5B,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAmB,EAAE;IAC7D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAc,CAAC;IACjD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qLAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAAgB;IACpD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qLAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,qLAAQ,EAAC;IAC/C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,qLAAQ,EAAC;IAEjD,IAAA,sLAAS;oCAAC;YACR,IAAI,YAAY;YAChB,eAAe;gBACb,gBAAgB;gBAChB,WAAW;gBACX,UAAU;gBACV,IAAI;oBACF,MAAM,WAAW;kEAAY;4BAC3B;0EAAgB,CAAC,OAAS,KAAK,GAAG,CAAC,OAAO,IAAI;;wBAChD;iEAAG;oBACH,MAAM,OAAO,MAAM,IAAA,kJAAqB;oBACxC,cAAc;oBACd,IAAI,CAAC,WAAW;wBACd,YAAY,KAAK,MAAM;wBACvB;6DAAS,CAAC;gCACR,MAAM,OAAoB,CAAC;gCAC3B,KAAK,MAAM,CAAC,OAAO;qEAAC,CAAC;wCACnB,IAAI,IAAI,CAAC,MAAM,QAAQ,CAAC,EAAE;4CACxB,IAAI,CAAC,MAAM,QAAQ,CAAC,GAAG,IAAI,CAAC,MAAM,QAAQ,CAAC;wCAC7C;oCACF;;gCACA,OAAO;4BACT;;wBACA,gBAAgB;oBAClB;gBACF,EAAE,OAAO,OAAY;oBACnB,IAAI,CAAC,WAAW,UAAU,MAAM,OAAO,IAAI;gBAC7C,SAAU;oBACR,IAAI,CAAC,WAAW,WAAW;gBAC7B;YACF;YACA;YACA;4CAAO;oBACL,YAAY;gBACd;;QACF;mCAAG,EAAE;IAEL,MAAM,WAAW,IAAA,oLAAO;4CAAC;YACvB,MAAM,OAAO,OAAO,WAAW,GAAG,IAAI;YACtC,IAAI,CAAC,MAAM,OAAO;YAClB,OAAO,SAAS,MAAM;oDAAC,CAAC,QAAU,MAAM,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;;QACtE;2CAAG;QAAC;QAAU;KAAO;IAErB,IAAA,sLAAS;oCAAC;YACR,QAAQ;QACV;mCAAG;QAAC;KAAO;IAEX,MAAM,UAAU,KAAK,GAAG,CAAC,KAAK,IAAI,CAAC,SAAS,MAAM,GAAG,WAAW;IAEhE,IAAA,sLAAS;oCAAC;YACR,IAAI,OAAO,SAAS;gBAClB,QAAQ;YACV;QACF;mCAAG;QAAC;QAAS;KAAK;IAElB,MAAM,iBAAiB,IAAA,oLAAO;kDAAC;YAC7B,MAAM,QAAQ,CAAC,OAAO,CAAC,IAAI;YAC3B,OAAO,SAAS,KAAK,CAAC,OAAO,QAAQ;QACvC;iDAAG;QAAC;QAAU;QAAM;KAAS;IAE7B,SAAS,aAAa,KAAqB;QACzC,SAAS,CAAC,OAAS,CAAC;gBAClB,GAAG,IAAI;gBACP,CAAC,MAAM,QAAQ,CAAC,EAAE;oBAChB,UAAU,CAAC,IAAI,CAAC,MAAM,QAAQ,CAAC,EAAE;oBACjC,IAAI,IAAI,CAAC,MAAM,QAAQ,CAAC,EAAE,MAAM;gBAClC;YACF,CAAC;IACH;IAEA,SAAS,SAAS,QAAgB,EAAE,EAAU;QAC5C,SAAS,CAAC,OAAS,CAAC;gBAClB,GAAG,IAAI;gBACP,CAAC,SAAS,EAAE;oBACV,UAAU,IAAI,CAAC,SAAS,EAAE,YAAY;oBACtC;gBACF;YACF,CAAC;IACH;IAEA,MAAM,eAAe,IAAA,oLAAO;gDAAC,IAAM,OAAO,MAAM,CAAC,OAAO,IAAI;wDAAC,CAAC,OAAS,KAAK,QAAQ;;+CAAG;QAAC;KAAM;IAE9F,eAAe;QACb,MAAM,eAAe,OAAO,OAAO,CAAC,OACjC,MAAM,CAAC,CAAC,GAAG,KAAK,GAAK,KAAK,QAAQ,EAClC,GAAG,CAAC,CAAC,CAAC,UAAU,KAAK,GAAK,CAAC;gBAC1B;gBACA,MAAM,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,WAAW,QAAQ;gBAC7D,IAAI,KAAK,EAAE,IAAI;YACjB,CAAC;QAEH,IAAI,CAAC,aAAa,MAAM,EAAE;YACxB,UAAU;YACV;QACF;QAEA,IAAI;YACF,aAAa;YACb,eAAe,aAAa,MAAM;YAClC,kBAAkB;YAClB,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,MAAM,EAAE,KAAK,EAAG;gBAC/C,MAAM,IAAA,kJAAqB,EAAC;oBAAC,YAAY,CAAC,EAAE;iBAAC;gBAC7C,kBAAkB,IAAI;gBACtB,UAAU,CAAC,WAAW,EAAE,IAAI,EAAE,CAAC,EAAE,aAAa,MAAM,CAAC,GAAG,CAAC;YAC3D;YACA,UAAU;YACV,OAAO,OAAO;YACd,WAAW,SAAS;QACtB,EAAE,OAAO,OAAY;YACnB,UAAU,MAAM,OAAO,IAAI;QAC7B,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,yMAAC;QAAI,WAAU;kBACb,cAAA,yMAAC;YAAI,WAAU;;8BACb,yMAAC;oBAAI,WAAU;;sCACb,yMAAC;sCAAG;;;;;;sCACJ,yMAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAY,SAAS;sCAAS;;;;;;;;;;;;8BAKhE,yMAAC;oBAAI,OAAO;wBAAE,SAAS;wBAAQ,KAAK;wBAAW,cAAc;oBAAO;;sCAClE,yMAAC;4BAAI,OAAO;gCAAE,MAAM;gCAAG,UAAU;4BAAW;;8CAC1C,yMAAC;oCACC,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;oCACzC,OAAO;wCAAE,aAAa;oCAAS;;;;;;8CAEjC,yMAAC;oCACC,OAAO;wCACL,UAAU;wCACV,MAAM;wCACN,KAAK;wCACL,WAAW;wCACX,OAAO;oCACT;8CACD;;;;;;;;;;;;sCAIH,yMAAC;4BAAI,OAAO;gCAAE,SAAS;gCAAQ,YAAY;gCAAU,KAAK;4BAAS;;8CACjE,yMAAC;oCAAO,MAAK;oCAAS,WAAU;oCAAY,UAAU,QAAQ;oCAAG,SAAS,IAAM,QAAQ,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI;8CAAK;;;;;;8CAGpH,yMAAC;;wCAAK;wCACI;wCAAK;wCAAI;;;;;;;8CAEnB,yMAAC;oCACC,MAAK;oCACL,WAAU;oCACV,UAAU,QAAQ;oCAClB,SAAS,IAAM,QAAQ,CAAC,IAAM,KAAK,GAAG,CAAC,SAAS,IAAI;8CACrD;;;;;;;;;;;;;;;;;;8BAML,yMAAC;oBAAI,OAAO;wBAAE,WAAW;wBAAS,WAAW;wBAAQ,QAAQ;wBAA2B,cAAc;oBAAM;8BACzG,wBACC,yMAAC;wBAAI,WAAU;wBAAmB,OAAO;4BAAE,SAAS;wBAAO;;0CACzD,yMAAC;gCAAI,WAAU;0CACb,cAAA,yMAAC;oCAAI,WAAU;oCAAoB,OAAO;wCAAE,OAAO,GAAG,aAAa,CAAC,CAAC;oCAAC;;;;;;;;;;;0CAExE,yMAAC;;oCAAM;oCAAa;;;;;;;;;;;;6CAGtB,yMAAC;;0CACC,yMAAC;0CACC,cAAA,yMAAC;;sDACC,yMAAC;;;;;sDACD,yMAAC;sDAAG;;;;;;sDACJ,yMAAC;sDAAG;;;;;;sDACJ,yMAAC;sDAAG;;;;;;;;;;;;;;;;;0CAGR,yMAAC;;oCACE,eAAe,GAAG,CAAC,CAAC,sBACnB,yMAAC;;8DACC,yMAAC;8DACC,cAAA,yMAAC;wDACC,MAAK;wDACL,SAAS,KAAK,CAAC,MAAM,QAAQ,CAAC,EAAE,YAAY;wDAC5C,UAAU,IAAM,aAAa;;;;;;;;;;;8DAGjC,yMAAC;8DAAI,MAAM,IAAI;;;;;;8DACf,yMAAC;8DAAI,MAAM,QAAQ;;;;;;8DACnB,yMAAC;8DACC,cAAA,yMAAC;wDACC,aAAY;wDACZ,OAAO,KAAK,CAAC,MAAM,QAAQ,CAAC,EAAE,MAAM;wDACpC,UAAU,CAAC,IAAM,SAAS,MAAM,QAAQ,EAAE,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;2CAdrD,MAAM,QAAQ;;;;;oCAmBxB,CAAC,eAAe,MAAM,kBACrB,yMAAC;kDACC,cAAA,yMAAC;4CAAG,SAAS;4CAAG,OAAO;gDAAE,WAAW;gDAAU,SAAS;4CAAO;sDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAU5E,wBAAU,yMAAC;oBAAE,OAAO;wBAAE,WAAW;oBAAU;8BAAI;;;;;;gBAC/C,cAAc,mBACb,yMAAC;oBAAI,WAAU;;sCACb,yMAAC;4BAAI,WAAU;sCACb,cAAA,yMAAC;gCAAI,WAAU;gCAAoB,OAAO;oCAAE,OAAO,GAAG,KAAK,KAAK,CAAC,AAAC,iBAAiB,cAAe,KAAK,CAAC,CAAC;gCAAC;;;;;;;;;;;sCAE5G,yMAAC;;gCACE;gCAAe;gCAAE;;;;;;;;;;;;;8BAKxB,yMAAC;oBAAI,OAAO;wBAAE,SAAS;wBAAQ,gBAAgB;wBAAY,KAAK;wBAAW,WAAW;oBAAO;;sCAC3F,yMAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAY,SAAS;sCAAS;;;;;;sCAG9D,yMAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU,aAAa,WAAW,cAAc,KAAK,CAAC;sCAErD,YAAY,kBAAkB;;;;;;;;;;;;;;;;;;;;;;;AAM3C;GA/PwB;;QACP,8JAAS;;;KADF"}},
    {"offset": {"line": 843, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/StructureSyncModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { getGroupsWithCR, syncGroupStructure, type GrupoCrItem } from \"../lib/api\";\nimport { useRouter } from \"next/navigation\";\n\ntype Props = {\n  onClose: () => void;\n};\n\nexport default function StructureSyncModal({ onClose }: Props) {\n  const router = useRouter();\n  const [groups, setGroups] = useState<GrupoCrItem[]>([]);\n  const [loaded, setLoaded] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [status, setStatus] = useState<string | null>(\"Carregando grupos com CR...\");\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      try {\n        const data = await getGroupsWithCR();\n        if (!cancelled) {\n          setGroups(data);\n          setStatus(`Encontrados ${data.length} grupo(s) com CR. Iniciando sincronizaÃ§Ã£o...`);\n          setLoaded(true);\n        }\n      } catch (err: any) {\n        if (!cancelled) setError(err?.message ?? \"Erro ao buscar grupos.\");\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  useEffect(() => {\n    let cancelled = false;\n    async function sync() {\n      if (!loaded || !groups.length) {\n        if (loaded) {\n          setStatus(\"Nenhum grupo com CR encontrado.\");\n        }\n        return;\n      }\n      for (let i = 0; i < groups.length; i += 1) {\n        if (cancelled) break;\n        const grupo = groups[i];\n        try {\n          await syncGroupStructure(grupo.id);\n          setProgress(i + 1);\n          setStatus(`Sincronizando ${grupo.nome_grupo} (${i + 1}/${groups.length})`);\n        } catch (err: any) {\n          setError(err?.message ?? `Falha ao sincronizar ${grupo.nome_grupo}`);\n          break;\n        }\n      }\n      if (!cancelled) {\n        setStatus(\"SincronizaÃ§Ã£o concluÃ­da!\");\n        router.refresh();\n        setTimeout(onClose, 1200);\n      }\n    }\n    if (loaded) {\n      sync();\n    }\n    return () => {\n      cancelled = true;\n    };\n  }, [loaded, groups, router]);\n\n  const total = groups.length || 1;\n  const percent = Math.min(100, Math.round((progress / total) * 100));\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal\">\n        <div className=\"modal-header\">\n          <h3>Sincronizar estrutura (Vista)</h3>\n          <button type=\"button\" className=\"secondary\" onClick={onClose}>\n            Fechar\n          </button>\n        </div>\n        <p>{status}</p>\n        <div className=\"progress-wrapper\">\n          <div className=\"progress-bar\">\n            <div className=\"progress-bar-fill\" style={{ width: `${percent}%` }} />\n          </div>\n          <span>{percent}%</span>\n        </div>\n        {error && <p style={{ color: \"#f87171\" }}>{error}</p>}\n        <p style={{ color: \"var(--text-muted)\", fontSize: \"0.9rem\" }}>\n          Este processo atualiza Diretor Executivo, Diretor Regional, Cliente etc. com base no CR de cada grupo.\n        </p>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAUe,SAAS,mBAAmB,EAAE,OAAO,EAAS;;IAC3D,MAAM,SAAS,IAAA,8JAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAAgB,EAAE;IACtD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAAC;IACrC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAC;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAAgB;IACpD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAgB;IAElD,IAAA,sLAAS;wCAAC;YACR,IAAI,YAAY;YAChB,eAAe;gBACb,IAAI;oBACF,MAAM,OAAO,MAAM,IAAA,4IAAe;oBAClC,IAAI,CAAC,WAAW;wBACd,UAAU;wBACV,UAAU,CAAC,YAAY,EAAE,KAAK,MAAM,CAAC,4CAA4C,CAAC;wBAClF,UAAU;oBACZ;gBACF,EAAE,OAAO,KAAU;oBACjB,IAAI,CAAC,WAAW,SAAS,KAAK,WAAW;gBAC3C;YACF;YACA;YACA;gDAAO;oBACL,YAAY;gBACd;;QACF;uCAAG,EAAE;IAEL,IAAA,sLAAS;wCAAC;YACR,IAAI,YAAY;YAChB,eAAe;gBACb,IAAI,CAAC,UAAU,CAAC,OAAO,MAAM,EAAE;oBAC7B,IAAI,QAAQ;wBACV,UAAU;oBACZ;oBACA;gBACF;gBACA,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,KAAK,EAAG;oBACzC,IAAI,WAAW;oBACf,MAAM,QAAQ,MAAM,CAAC,EAAE;oBACvB,IAAI;wBACF,MAAM,IAAA,+IAAkB,EAAC,MAAM,EAAE;wBACjC,YAAY,IAAI;wBAChB,UAAU,CAAC,cAAc,EAAE,MAAM,UAAU,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,OAAO,MAAM,CAAC,CAAC,CAAC;oBAC3E,EAAE,OAAO,KAAU;wBACjB,SAAS,KAAK,WAAW,CAAC,qBAAqB,EAAE,MAAM,UAAU,EAAE;wBACnE;oBACF;gBACF;gBACA,IAAI,CAAC,WAAW;oBACd,UAAU;oBACV,OAAO,OAAO;oBACd,WAAW,SAAS;gBACtB;YACF;YACA,IAAI,QAAQ;gBACV;YACF;YACA;gDAAO;oBACL,YAAY;gBACd;;QACF;uCAAG;QAAC;QAAQ;QAAQ;KAAO;IAE3B,MAAM,QAAQ,OAAO,MAAM,IAAI;IAC/B,MAAM,UAAU,KAAK,GAAG,CAAC,KAAK,KAAK,KAAK,CAAC,AAAC,WAAW,QAAS;IAE9D,qBACE,yMAAC;QAAI,WAAU;kBACb,cAAA,yMAAC;YAAI,WAAU;;8BACb,yMAAC;oBAAI,WAAU;;sCACb,yMAAC;sCAAG;;;;;;sCACJ,yMAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAY,SAAS;sCAAS;;;;;;;;;;;;8BAIhE,yMAAC;8BAAG;;;;;;8BACJ,yMAAC;oBAAI,WAAU;;sCACb,yMAAC;4BAAI,WAAU;sCACb,cAAA,yMAAC;gCAAI,WAAU;gCAAoB,OAAO;oCAAE,OAAO,GAAG,QAAQ,CAAC,CAAC;gCAAC;;;;;;;;;;;sCAEnE,yMAAC;;gCAAM;gCAAQ;;;;;;;;;;;;;gBAEhB,uBAAS,yMAAC;oBAAE,OAAO;wBAAE,OAAO;oBAAU;8BAAI;;;;;;8BAC3C,yMAAC;oBAAE,OAAO;wBAAE,OAAO;wBAAqB,UAAU;oBAAS;8BAAG;;;;;;;;;;;;;;;;;AAMtE;GAzFwB;;QACP,8JAAS;;;KADF"}},
    {"offset": {"line": 1054, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/EditGroupModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport type { Grupo } from \"../lib/api\";\nimport { clientApi } from \"../lib/client\";\nimport { useRouter } from \"next/navigation\";\n\ntype Props = {\n  grupo: Grupo;\n  onClose: () => void;\n};\n\nconst inputClasses =\n  \"block w-full rounded-xl border border-border bg-surface/70 px-3 py-2 text-sm text-text placeholder:text-textMuted focus:border-accent focus:outline-none focus:ring-2 focus:ring-accent/50 transition\";\n\nexport default function EditGroupModal({ grupo, onClose }: Props) {\n  const router = useRouter();\n  const [status, setStatus] = useState<{ type: \"success\" | \"error\"; message: string } | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  async function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    setLoading(true);\n    setStatus(null);\n    const form = new FormData(event.currentTarget);\n    try {\n      await clientApi.put(`/grupos/${grupo.id}`, {\n        group_id: form.get(\"group_id\"),\n        nome: form.get(\"nome_grupo\"),\n        enviar_mensagem: form.get(\"envio\") === \"on\",\n        envio_pdf: form.get(\"envio_pdf\") === \"on\",\n        cr: form.get(\"cr\")\n      });\n      setStatus({ type: \"success\", message: \"Grupo atualizado com sucesso!\" });\n      router.refresh();\n      setTimeout(onClose, 1200);\n    } catch (error: any) {\n      setStatus({ type: \"error\", message: error.message ?? \"Erro ao atualizar o grupo.\" });\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/80 p-4 backdrop-blur-sm\">\n      <div className=\"w-full max-w-2xl rounded-2xl border border-border bg-surface p-6 shadow-panel\">\n        <div className=\"mb-4 flex flex-wrap items-center justify-between gap-3\">\n          <div>\n            <p className=\"text-xs uppercase tracking-wide text-textMuted/70\">Editar grupo</p>\n            <h3 className=\"text-xl font-semibold text-white\">{grupo.nome_grupo}</h3>\n          </div>\n          <button\n            type=\"button\"\n            className=\"inline-flex items-center justify-center rounded-xl border border-border/60 px-4 py-2 text-sm font-medium text-text transition hover:border-accent hover:text-accent focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent\"\n            onClick={onClose}\n          >\n            Fechar\n          </button>\n        </div>\n        <form className=\"space-y-4\" onSubmit={handleSubmit}>\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            <label className=\"flex flex-col gap-2 text-sm font-semibold text-text\">\n              Group ID\n              <input className={inputClasses} name=\"group_id\" defaultValue={grupo.group_id} required />\n            </label>\n            <label className=\"flex flex-col gap-2 text-sm font-semibold text-text\">\n              Nome\n              <input className={inputClasses} name=\"nome_grupo\" defaultValue={grupo.nome_grupo} required />\n            </label>\n            <label className=\"flex flex-col gap-2 text-sm font-semibold text-text md:col-span-2\">\n              CR\n              <input className={inputClasses} name=\"cr\" defaultValue={grupo.cr ?? \"\"} />\n            </label>\n          </div>\n          <div className=\"flex flex-col gap-3\">\n            <label className=\"flex items-center gap-3 text-sm font-medium text-text\">\n              <input\n                type=\"checkbox\"\n                name=\"envio\"\n                defaultChecked={grupo.envio}\n                className=\"h-5 w-5 rounded border-border bg-surface accent-accent transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent\"\n              />\n              <span>Habilitar envio</span>\n            </label>\n            <label className=\"flex items-center gap-3 text-sm font-medium text-text\">\n              <input\n                type=\"checkbox\"\n                name=\"envio_pdf\"\n                defaultChecked={grupo.envio_pdf}\n                className=\"h-5 w-5 rounded border-border bg-surface accent-accent transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent\"\n              />\n              <span>Enviar PDF automaticamente junto com a mensagem programada</span>\n            </label>\n          </div>\n          <div className=\"flex items-center justify-end gap-3\">\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"inline-flex items-center justify-center rounded-xl bg-accent px-5 py-2 text-sm font-semibold text-slate-900 shadow-sm transition hover:bg-cyan-300 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent disabled:cursor-not-allowed disabled:opacity-70\"\n            >\n              {loading ? \"Salvando...\" : \"Salvar alteraÃ§Ãµes\"}\n            </button>\n          </div>\n        </form>\n        {status && (\n          <p\n            className={`mt-3 text-sm ${\n              status.type === \"success\" ? \"text-emerald-400\" : \"text-rose-400\"\n            }`}\n          >\n            {status.message}\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;;;AALA;;;;AAYA,MAAM,eACJ;AAEa,SAAS,eAAe,EAAE,KAAK,EAAE,OAAO,EAAS;;IAC9D,MAAM,SAAS,IAAA,8JAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAAwD;IAC5F,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qLAAQ,EAAC;IAEvC,eAAe,aAAa,KAAuC;QACjE,MAAM,cAAc;QACpB,WAAW;QACX,UAAU;QACV,MAAM,OAAO,IAAI,SAAS,MAAM,aAAa;QAC7C,IAAI;YACF,MAAM,yIAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,MAAM,EAAE,EAAE,EAAE;gBACzC,UAAU,KAAK,GAAG,CAAC;gBACnB,MAAM,KAAK,GAAG,CAAC;gBACf,iBAAiB,KAAK,GAAG,CAAC,aAAa;gBACvC,WAAW,KAAK,GAAG,CAAC,iBAAiB;gBACrC,IAAI,KAAK,GAAG,CAAC;YACf;YACA,UAAU;gBAAE,MAAM;gBAAW,SAAS;YAAgC;YACtE,OAAO,OAAO;YACd,WAAW,SAAS;QACtB,EAAE,OAAO,OAAY;YACnB,UAAU;gBAAE,MAAM;gBAAS,SAAS,MAAM,OAAO,IAAI;YAA6B;QACpF,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,yMAAC;QAAI,WAAU;kBACb,cAAA,yMAAC;YAAI,WAAU;;8BACb,yMAAC;oBAAI,WAAU;;sCACb,yMAAC;;8CACC,yMAAC;oCAAE,WAAU;8CAAoD;;;;;;8CACjE,yMAAC;oCAAG,WAAU;8CAAoC,MAAM,UAAU;;;;;;;;;;;;sCAEpE,yMAAC;4BACC,MAAK;4BACL,WAAU;4BACV,SAAS;sCACV;;;;;;;;;;;;8BAIH,yMAAC;oBAAK,WAAU;oBAAY,UAAU;;sCACpC,yMAAC;4BAAI,WAAU;;8CACb,yMAAC;oCAAM,WAAU;;wCAAsD;sDAErE,yMAAC;4CAAM,WAAW;4CAAc,MAAK;4CAAW,cAAc,MAAM,QAAQ;4CAAE,QAAQ;;;;;;;;;;;;8CAExF,yMAAC;oCAAM,WAAU;;wCAAsD;sDAErE,yMAAC;4CAAM,WAAW;4CAAc,MAAK;4CAAa,cAAc,MAAM,UAAU;4CAAE,QAAQ;;;;;;;;;;;;8CAE5F,yMAAC;oCAAM,WAAU;;wCAAoE;sDAEnF,yMAAC;4CAAM,WAAW;4CAAc,MAAK;4CAAK,cAAc,MAAM,EAAE,IAAI;;;;;;;;;;;;;;;;;;sCAGxE,yMAAC;4BAAI,WAAU;;8CACb,yMAAC;oCAAM,WAAU;;sDACf,yMAAC;4CACC,MAAK;4CACL,MAAK;4CACL,gBAAgB,MAAM,KAAK;4CAC3B,WAAU;;;;;;sDAEZ,yMAAC;sDAAK;;;;;;;;;;;;8CAER,yMAAC;oCAAM,WAAU;;sDACf,yMAAC;4CACC,MAAK;4CACL,MAAK;4CACL,gBAAgB,MAAM,SAAS;4CAC/B,WAAU;;;;;;sDAEZ,yMAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAGV,yMAAC;4BAAI,WAAU;sCACb,cAAA,yMAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,UAAU,gBAAgB;;;;;;;;;;;;;;;;;gBAIhC,wBACC,yMAAC;oBACC,WAAW,CAAC,aAAa,EACvB,OAAO,IAAI,KAAK,YAAY,qBAAqB,iBACjD;8BAED,OAAO,OAAO;;;;;;;;;;;;;;;;;AAM3B;GArGwB;;QACP,8JAAS;;;KADF"}},
    {"offset": {"line": 1341, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/GroupTable.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport type { Grupo } from \"../lib/api\";\nimport { FaEdit } from \"react-icons/fa\";\n\ntype Props = {\n  grupos: Grupo[];\n  selectedIds: number[];\n  onToggle: (id: number) => void;\n  onToggleAll: (ids: number[]) => void;\n  onEdit: (grupo: Grupo) => void;\n};\n\nconst PAGE_SIZE = 10;\n\nexport default function GroupTable({ grupos, selectedIds, onToggle, onToggleAll, onEdit }: Props) {\n  const [page, setPage] = useState(1);\n\n  useEffect(() => {\n    setPage(1);\n  }, [grupos.length]);\n\n  const data = useMemo(() => {\n    const totalPages = Math.max(1, Math.ceil(grupos.length / PAGE_SIZE));\n    const currentPage = Math.min(page, totalPages);\n    const start = (currentPage - 1) * PAGE_SIZE;\n    const current = grupos.slice(start, start + PAGE_SIZE);\n    return {\n      totalPages,\n      currentPage,\n      items: current,\n    };\n  }, [grupos, page]);\n\n  const visibleIds = data.items.map((g) => g.id);\n  const allSelected = visibleIds.length > 0 && visibleIds.every((id) => selectedIds.includes(id));\n\n  return (\n    <div style={{ display: \"grid\", gap: \"1rem\" }}>\n      <div style={{ overflowX: \"auto\" }}>\n        <table>\n          <thead>\n            <tr>\n              <th>\n                <input\n                  type=\"checkbox\"\n                  checked={allSelected}\n                  onChange={() => onToggleAll(visibleIds)}\n                />\n              </th>\n              <th>Nome</th>\n              <th>Group ID</th>\n              <th>CR</th>\n              <th>Envio</th>\n              <th>Envio PDF</th>\n              <th>Cliente</th>\n              <th>PEC 01</th>\n              <th>PEC 02</th>\n              <th>Diretor Executivo</th>\n              <th>Diretor Regional</th>\n              <th>Gerente Regional</th>\n              <th>Gerente</th>\n              <th>Supervisor</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {data.items.map((grupo) => {\n              const checked = selectedIds.includes(grupo.id);\n              return (\n                <tr key={grupo.id}>\n                  <td>\n                    <input type=\"checkbox\" checked={checked} onChange={() => onToggle(grupo.id)} />\n                  </td>\n                  <td>{grupo.nome_grupo}</td>\n                  <td>{grupo.group_id}</td>\n                  <td>{grupo.cr ?? \"â€”\"}</td>\n                  <td>\n                    <span className=\"chip\">{grupo.envio ? \"Ativo\" : \"Inativo\"}</span>\n                  </td>\n                  <td>\n                    <span className=\"chip\">{grupo.envio_pdf ? \"Habilitado\" : \"Desabilitado\"}</span>\n                  </td>\n                  <td>{grupo.cliente ?? \"â€”\"}</td>\n                  <td>{grupo.pec_01 ?? \"â€”\"}</td>\n                  <td>{grupo.pec_02 ?? \"â€”\"}</td>\n                  <td>{grupo.diretor_executivo ?? \"â€”\"}</td>\n                  <td>{grupo.diretor_regional ?? \"â€”\"}</td>\n                  <td>{grupo.gerente_regional ?? \"â€”\"}</td>\n                  <td>{grupo.gerente ?? \"â€”\"}</td>\n                  <td>{grupo.supervisor ?? \"â€”\"}</td>\n                  <td>\n                    <button type=\"button\" className=\"secondary\" onClick={() => onEdit(grupo)}>\n                      <FaEdit style={{ marginRight: \"0.35rem\" }} />\n                      Editar\n                    </button>\n                  </td>\n                </tr>\n              );\n            })}\n            {data.items.length === 0 && (\n              <tr>\n                <td colSpan={15} style={{ textAlign: \"center\", padding: \"1rem\" }}>\n                  Nenhum grupo encontrado com os filtros atuais.\n                </td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n\n      <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n        <span>\n          PÃ¡gina {data.currentPage} de {data.totalPages} â€” {grupos.length} grupo(s)\n        </span>\n        <div style={{ display: \"flex\", gap: \"0.5rem\" }}>\n          <button\n            type=\"button\"\n            className=\"secondary\"\n            disabled={data.currentPage === 1}\n            onClick={() => setPage((prev) => Math.max(1, prev - 1))}\n          >\n            â—€\n          </button>\n          <button\n            type=\"button\"\n            className=\"secondary\"\n            disabled={data.currentPage === data.totalPages}\n            onClick={() => setPage((prev) => Math.min(data.totalPages, prev + 1))}\n          >\n            â–¶\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1794, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/GroupsPageClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport type { Grupo } from \"../lib/api\";\nimport { deleteGroups } from \"../lib/api\";\nimport EvolutionModal from \"./EvolutionModal\";\nimport StructureSyncModal from \"./StructureSyncModal\";\nimport EditGroupModal from \"./EditGroupModal\";\nimport GroupTable from \"./GroupTable\";\nimport { FaCloudDownloadAlt, FaDatabase, FaTrash } from \"react-icons/fa\";\n\ntype Props = {\n  grupos: Grupo[];\n  filtros: Record<string, string[]>;\n};\n\ntype FiltroState = {\n  diretor_executivo?: string;\n  diretor_regional?: string;\n  gerente_regional?: string;\n  gerente?: string;\n  supervisor?: string;\n  cliente?: string;\n  pec_01?: string;\n  pec_02?: string;\n};\n\nexport default function GroupsPageClient({ grupos, filtros }: Props) {\n  const router = useRouter();\n  const [search, setSearch] = useState(\"\");\n  const [selectedFilters, setSelectedFilters] = useState<FiltroState>({});\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\n  const [evolutionOpen, setEvolutionOpen] = useState(false);\n  const [structureOpen, setStructureOpen] = useState(false);\n  const [editGroup, setEditGroup] = useState<Grupo | null>(null);\n  const [actionStatus, setActionStatus] = useState<string | null>(null);\n  const [deleteLoading, setDeleteLoading] = useState(false);\n\n  const filteredGroups = useMemo(() => {\n    const text = search.trim().toLowerCase();\n    return grupos.filter((grupo) => {\n      const matchesSearch =\n        !text ||\n        grupo.nome_grupo.toLowerCase().includes(text) ||\n        grupo.group_id.toLowerCase().includes(text) ||\n        (grupo.cr ?? \"\").toLowerCase().includes(text);\n\n      if (!matchesSearch) return false;\n\n      return Object.entries(selectedFilters).every(([key, value]) => {\n        if (!value) return true;\n        const campo = (grupo as any)[key] ?? \"\";\n        return campo === value;\n      });\n    });\n  }, [grupos, search, selectedFilters]);\n\n  function handleFilterChange(key: keyof FiltroState, value: string) {\n    setSelectedFilters((prev) => ({\n      ...prev,\n      [key]: value || undefined\n    }));\n  }\n\n  function toggleSelection(id: number) {\n    setSelectedIds((prev) => (prev.includes(id) ? prev.filter((item) => item !== id) : [...prev, id]));\n  }\n\n  function toggleSelectAll(ids: number[]) {\n    if (!ids.length) return;\n    const allSelected = ids.every((id) => selectedIds.includes(id));\n    if (allSelected) {\n      setSelectedIds((prev) => prev.filter((id) => !ids.includes(id)));\n    } else {\n      setSelectedIds((prev) => Array.from(new Set([...prev, ...ids])));\n    }\n  }\n\n  async function handleDelete() {\n    if (!selectedIds.length) return;\n    if (!window.confirm(`Remover ${selectedIds.length} grupo(s)?`)) return;\n    setDeleteLoading(true);\n    setActionStatus(\"Removendo grupos selecionados...\");\n    try {\n      await deleteGroups(selectedIds);\n      setActionStatus(\"Grupos removidos.\");\n      setSelectedIds([]);\n      router.refresh();\n    } catch (error: any) {\n      setActionStatus(error.message ?? \"Erro ao remover grupos.\");\n    } finally {\n      setDeleteLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"grid\" style={{ gap: \"1.5rem\" }}>\n      <section className=\"panel\" style={{ display: \"grid\", gap: \"1rem\" }}>\n        <h2>Grupos WhatsApp</h2>\n        <div style={{ position: \"relative\" }}>\n          <input\n            placeholder=\"Pesquisar por nome, group_id ou CR\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            style={{ paddingLeft: \"2.5rem\" }}\n          />\n          <span\n            style={{\n              position: \"absolute\",\n              left: \"0.9rem\",\n              top: \"50%\",\n              transform: \"translateY(-50%)\",\n              color: \"var(--text-muted)\"\n            }}\n          >\n            ðŸ”\n          </span>\n        </div>\n\n        <div style={{ display: \"flex\", gap: \"0.75rem\", justifyContent: \"flex-end\", flexWrap: \"wrap\" }}>\n          <button\n            type=\"button\"\n            className=\"secondary\"\n            onClick={() => {\n              setSearch(\"\");\n              setSelectedFilters({});\n            }}\n          >\n            Limpar filtros\n          </button>\n          <button type=\"button\" onClick={() => setStructureOpen(true)}>\n            <FaDatabase style={{ marginRight: \"0.35rem\" }} />\n            Sincronizar estrutura\n          </button>\n          <button type=\"button\" onClick={() => setEvolutionOpen(true)}>\n            <FaCloudDownloadAlt style={{ marginRight: \"0.35rem\" }} />\n            Sincronizar Evolution\n          </button>\n          <button\n            type=\"button\"\n            className=\"secondary\"\n            disabled={!selectedIds.length || deleteLoading}\n            onClick={handleDelete}\n          >\n            <FaTrash style={{ marginRight: \"0.35rem\" }} />\n            {deleteLoading ? \"Excluindo...\" : `Excluir (${selectedIds.length || 0})`}\n          </button>\n        </div>\n\n        <div className=\"filters-grid\">\n          {(\n            [\n              [\"diretor_executivo\", \"Diretor Executivo\"],\n              [\"diretor_regional\", \"Diretor Regional\"],\n              [\"gerente_regional\", \"Gerente Regional\"],\n              [\"gerente\", \"Gerente\"],\n              [\"supervisor\", \"Supervisor\"],\n              [\"cliente\", \"Cliente\"],\n              [\"pec_01\", \"PEC 01\"],\n              [\"pec_02\", \"PEC 02\"]\n            ] as Array<[keyof FiltroState, string]>\n          ).map(([key, label]) => (\n            <label key={key}>\n              {label}\n              <select value={selectedFilters[key] ?? \"\"} onChange={(e) => handleFilterChange(key, e.target.value)}>\n                <option value=\"\">Todos</option>\n                {(filtros[key === \"cliente\" ? \"cliente\" : key] ?? []).map((valor) => (\n                  <option key={valor} value={valor}>\n                    {valor}\n                  </option>\n                ))}\n              </select>\n            </label>\n          ))}\n        </div>\n      </section>\n\n      <section className=\"panel\">\n        <GroupTable\n          grupos={filteredGroups}\n          selectedIds={selectedIds}\n          onToggle={toggleSelection}\n          onToggleAll={toggleSelectAll}\n          onEdit={(grupo) => setEditGroup(grupo)}\n        />\n      </section>\n\n      {actionStatus && <p style={{ color: \"var(--text-muted)\" }}>{actionStatus}</p>}\n\n      {evolutionOpen && <EvolutionModal onClose={() => setEvolutionOpen(false)} />}\n      {structureOpen && <StructureSyncModal onClose={() => setStructureOpen(false)} />}\n      {editGroup && <EditGroupModal grupo={editGroup} onClose={() => setEditGroup(null)} />}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}