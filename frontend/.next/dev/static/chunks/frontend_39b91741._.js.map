{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/client.ts"],"sourcesContent":["\"use client\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL ?? \"http://localhost:5000/api\";\n\ntype Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n\nasync function request<T>(path: string, method: Method, body?: unknown): Promise<T> {\n  const res = await fetch(`${API_BASE}${path}`, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: body ? JSON.stringify(body) : undefined\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || `Erro ${res.status}`);\n  }\n\n  if (res.status === 204) {\n    return {} as T;\n  }\n\n  return res.json() as Promise<T>;\n}\n\nexport const clientApi = {\n  put: <T>(path: string, body?: unknown) => request<T>(path, \"PUT\", body),\n  post: <T>(path: string, body?: unknown) => request<T>(path, \"POST\", body),\n  delete: <T>(path: string) => request<T>(path, \"DELETE\")\n};\n"],"names":[],"mappings":";;;;AAEiB;AAFjB;AAEA,MAAM,WAAW,uLAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AAIzD,eAAe,QAAW,IAAY,EAAE,MAAc,EAAE,IAAc;IACpE,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C;QACA,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;IACtC;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,QAAQ,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;IAC9C;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACtB,OAAO,CAAC;IACV;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,YAAY;IACvB,KAAK,CAAI,MAAc,OAAmB,QAAW,MAAM,OAAO;IAClE,MAAM,CAAI,MAAc,OAAmB,QAAW,MAAM,QAAQ;IACpE,QAAQ,CAAI,OAAiB,QAAW,MAAM;AAChD"}},
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/app/grupos/table.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport type { Grupo } from \"../../lib/api\";\nimport { clientApi } from \"../../lib/client\";\n\ntype Props = {\n  grupos: Grupo[];\n  filtros: Record<string, string[]>;\n};\n\nexport default function GroupTable({ grupos, filtros }: Props) {\n  const [query, setQuery] = useState(\"\");\n  const [selected, setSelected] = useState<Grupo | null>(null);\n  const [status, setStatus] = useState<string | null>(null);\n\n  const filtered = useMemo(() => {\n    if (!query) return grupos;\n    const lower = query.toLowerCase();\n    return grupos.filter(\n      (grupo) =>\n        grupo.nome_grupo.toLowerCase().includes(lower) ||\n        (grupo.group_id ?? \"\").toLowerCase().includes(lower) ||\n        (grupo.cr ?? \"\").toLowerCase().includes(lower)\n    );\n  }, [grupos, query]);\n\n  async function handleUpdate(e: React.FormEvent<HTMLFormElement>) {\n    e.preventDefault();\n    if (!selected) return;\n\n    const formData = new FormData(e.currentTarget);\n    try {\n      await clientApi.put(`/grupos/${selected.id}`, {\n        group_id: formData.get(\"group_id\"),\n        nome: formData.get(\"nome_grupo\"),\n        enviar_mensagem: formData.get(\"envio\") === \"on\",\n        cr: formData.get(\"cr\")\n      });\n      setStatus(\"Grupo atualizado! Recarregue a página para ver os dados mais recentes.\");\n    } catch (error: any) {\n      setStatus(error.message ?? \"Erro ao atualizar\");\n    }\n  }\n\n  return (\n    <div style={{ display: \"grid\", gap: \"1.5rem\" }}>\n      <input\n        placeholder=\"Pesquisar por nome, group_id ou CR\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n      />\n\n      <div style={{ overflowX: \"auto\" }}>\n        <table>\n          <thead>\n            <tr>\n              <th>Nome</th>\n              <th>Group ID</th>\n              <th>CR</th>\n              <th>Envio</th>\n              <th>Cliente</th>\n              <th>Supervisor</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {filtered.map((grupo) => (\n              <tr key={grupo.id}>\n                <td>{grupo.nome_grupo}</td>\n                <td>{grupo.group_id}</td>\n                <td>{grupo.cr ?? \"—\"}</td>\n                <td>{grupo.envio ? \"Sim\" : \"Não\"}</td>\n                <td>{grupo.cliente ?? \"—\"}</td>\n                <td>{grupo.supervisor ?? \"—\"}</td>\n                <td>\n                  <button type=\"button\" onClick={() => setSelected(grupo)}>\n                    Editar\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {selected && (\n        <form className=\"panel\" onSubmit={handleUpdate}>\n          <h3>Editar grupo: {selected.nome_grupo}</h3>\n          <div style={{ display: \"grid\", gap: \"0.75rem\" }}>\n            <label>\n              Group ID\n              <input name=\"group_id\" defaultValue={selected.group_id} required />\n            </label>\n            <label>\n              Nome\n              <input name=\"nome_grupo\" defaultValue={selected.nome_grupo} required />\n            </label>\n            <label>\n              CR\n              <input name=\"cr\" defaultValue={selected.cr ?? \"\"} />\n            </label>\n            <label style={{ display: \"flex\", alignItems: \"center\", gap: \"0.5rem\" }}>\n              <input type=\"checkbox\" name=\"envio\" defaultChecked={selected.envio} />\n              Habilitar envio\n            </label>\n            <button type=\"submit\">Salvar alterações</button>\n            {status && <p style={{ margin: 0 }}>{status}</p>}\n          </div>\n        </form>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}