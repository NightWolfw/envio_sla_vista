{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/api.ts"],"sourcesContent":["const API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL ?? process.env.API_BASE_URL ?? \"http://localhost:5000/api\";\n\nasync function apiFetch<T>(path: string, init?: RequestInit): Promise<T> {\n  try {\n    const res = await fetch(`${API_BASE}${path}`, {\n      ...init,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(init?.headers ?? {})\n      },\n      cache: \"no-store\",\n      next: { revalidate: 0 }\n    });\n\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`Erro na API (${res.status}): ${text}`);\n    }\n\n    return res.json() as Promise<T>;\n  } catch (error) {\n    console.error(\"Falha ao buscar API\", error);\n    throw new Error(\n      `Não foi possível conectar à API (${API_BASE}). Verifique se o backend FastAPI está rodando e se NEXT_PUBLIC_API_BASE_URL está configurado.`\n    );\n  }\n}\n\nexport type OverviewStats = {\n  total_grupos: number;\n  total_mensagens: number;\n  total_envios: number;\n  generated_at: string;\n};\n\nexport async function getStats(): Promise<OverviewStats> {\n  return apiFetch<OverviewStats>(\"/stats\");\n}\n\nexport async function getDashboardResumo(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any; periodo: any }>(\"/dashboard/resumo\" + query);\n}\n\nexport async function getDashboardTarefas(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any[] }>(\"/dashboard/tarefas-mes\" + query);\n}\n\nexport async function getDashboardPizza(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: Record<string, number> }>(\"/dashboard/pizza\" + query);\n}\n\nexport type Grupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  cr?: string | null;\n  cliente?: string | null;\n  diretor_executivo?: string | null;\n  diretor_regional?: string | null;\n  gerente_regional?: string | null;\n  gerente?: string | null;\n  supervisor?: string | null;\n};\n\nexport async function getGrupos(): Promise<Grupo[]> {\n  return apiFetch<Grupo[]>(\"/grupos\");\n}\n\nexport async function getGrupoFiltros() {\n  return apiFetch(\"/grupos/filtros/meta\");\n}\n\nexport type Agendamento = {\n  id: number;\n  grupo_id: number;\n  nome_grupo: string;\n  cr: string | null;\n  tipo_envio: string;\n  dias_semana: string | null;\n  data_envio: string;\n  hora_inicio: string;\n  hora_fim: string;\n  ativo: boolean;\n};\n\nexport async function getAgendamentos(): Promise<Agendamento[]> {\n  return apiFetch<Agendamento[]>(\"/agendamentos\");\n}\n\nexport type Mensagem = {\n  id: number;\n  mensagem: string;\n  grupos_ids: string[];\n  tipo_recorrencia: string;\n  dias_semana: number[] | null;\n  horario: string;\n  data_inicio: string;\n  data_fim: string | null;\n  ativo: boolean;\n};\n\nexport async function getMensagens(params?: string): Promise<Mensagem[]> {\n  const suffix = params ? `?${params}` : \"\";\n  return apiFetch<Mensagem[]>(`/mensagens${suffix}`);\n}\n\nexport async function getSlaPreview(grupoId: number, payload: any) {\n  return apiFetch(`/sla/preview/${grupoId}`, {\n    method: \"POST\",\n    body: JSON.stringify(payload)\n  });\n}\n\nexport type EnvioGrupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  cr?: string | null;\n};\n\nexport async function getEnvioGrupos(): Promise<EnvioGrupo[]> {\n  return apiFetch<EnvioGrupo[]>(\"/envio/grupos\");\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,WACJ,QAAQ,GAAG,CAAC,wBAAwB,IAAI,QAAQ,GAAG,CAAC,YAAY,IAAI;AAEtE,eAAe,SAAY,IAAY,EAAE,IAAkB;IACzD,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;YAC5C,GAAG,IAAI;YACP,SAAS;gBACP,gBAAgB;gBAChB,GAAI,MAAM,WAAW,CAAC,CAAC;YACzB;YACA,OAAO;YACP,MAAM;gBAAE,YAAY;YAAE;QACxB;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,IAAI,MAAM,CAAC,GAAG,EAAE,MAAM;QACxD;QAEA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,MAAM,IAAI,MACR,CAAC,iCAAiC,EAAE,SAAS,8FAA8F,CAAC;IAEhJ;AACF;AASO,eAAe;IACpB,OAAO,SAAwB;AACjC;AAEO,eAAe,mBAAmB,MAAwB;IAC/D,MAAM,QAAQ,SAAS,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IACjD,OAAO,SAAsC,sBAAsB;AACrE;AAEO,eAAe,oBAAoB,MAAwB;IAChE,MAAM,QAAQ,SAAS,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IACjD,OAAO,SAA0B,2BAA2B;AAC9D;AAEO,eAAe,kBAAkB,MAAwB;IAC9D,MAAM,QAAQ,SAAS,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IACjD,OAAO,SAA2C,qBAAqB;AACzE;AAgBO,eAAe;IACpB,OAAO,SAAkB;AAC3B;AAEO,eAAe;IACpB,OAAO,SAAS;AAClB;AAeO,eAAe;IACpB,OAAO,SAAwB;AACjC;AAcO,eAAe,aAAa,MAAe;IAChD,MAAM,SAAS,SAAS,CAAC,CAAC,EAAE,QAAQ,GAAG;IACvC,OAAO,SAAqB,CAAC,UAAU,EAAE,QAAQ;AACnD;AAEO,eAAe,cAAc,OAAe,EAAE,OAAY;IAC/D,OAAO,SAAS,CAAC,aAAa,EAAE,SAAS,EAAE;QACzC,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAUO,eAAe;IACpB,OAAO,SAAuB;AAChC"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/app/page.tsx"],"sourcesContent":["import { getStats } from \"../lib/api\";\nimport dynamic from \"next/dynamic\";\n\nconst DashboardResumoClient = dynamic(() => import(\"../components/DashboardResumoClient\"), {\n  ssr: false\n});\n\nexport default async function HomePage() {\n  const stats = await getStats();\n\n  const cards = [\n    { label: \"Grupos\", value: stats.total_grupos },\n    { label: \"Mensagens ativas\", value: stats.total_mensagens },\n    { label: \"Envios realizados\", value: stats.total_envios }\n  ];\n\n  return (\n    <div className=\"grid\" style={{ gap: \"1.5rem\" }}>\n      <section className=\"panel\">\n        <h2>Resumo rápido</h2>\n        <div className=\"grid cards\">\n          {cards.map((card) => (\n            <div key={card.label} className=\"panel\" style={{ padding: \"1rem\" }}>\n              <p style={{ margin: 0, color: \"var(--text-muted)\", fontSize: \"0.9rem\" }}>{card.label}</p>\n              <strong style={{ fontSize: \"1.8rem\" }}>{card.value}</strong>\n            </div>\n          ))}\n        </div>\n      </section>\n\n      <DashboardResumoClient />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAEA,MAAM,wBAAwB,IAAA,sLAAO,EAAC;;;;;;IACpC,KAAK;;AAGQ,eAAe;IAC5B,MAAM,QAAQ,MAAM,IAAA,kIAAQ;IAE5B,MAAM,QAAQ;QACZ;YAAE,OAAO;YAAU,OAAO,MAAM,YAAY;QAAC;QAC7C;YAAE,OAAO;YAAoB,OAAO,MAAM,eAAe;QAAC;QAC1D;YAAE,OAAO;YAAqB,OAAO,MAAM,YAAY;QAAC;KACzD;IAED,qBACE,0PAAC;QAAI,WAAU;QAAO,OAAO;YAAE,KAAK;QAAS;;0BAC3C,0PAAC;gBAAQ,WAAU;;kCACjB,0PAAC;kCAAG;;;;;;kCACJ,0PAAC;wBAAI,WAAU;kCACZ,MAAM,GAAG,CAAC,CAAC,qBACV,0PAAC;gCAAqB,WAAU;gCAAQ,OAAO;oCAAE,SAAS;gCAAO;;kDAC/D,0PAAC;wCAAE,OAAO;4CAAE,QAAQ;4CAAG,OAAO;4CAAqB,UAAU;wCAAS;kDAAI,KAAK,KAAK;;;;;;kDACpF,0PAAC;wCAAO,OAAO;4CAAE,UAAU;wCAAS;kDAAI,KAAK,KAAK;;;;;;;+BAF1C,KAAK,KAAK;;;;;;;;;;;;;;;;0BAQ1B,0PAAC;;;;;;;;;;;AAGP"}}]
}