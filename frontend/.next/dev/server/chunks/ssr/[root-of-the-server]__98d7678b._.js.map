{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/api.ts"],"sourcesContent":["const API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL ?? process.env.API_BASE_URL ?? \"http://localhost:5000/api\";\n\nasync function apiFetch<T>(path: string, init?: RequestInit): Promise<T> {\n  try {\n    const res = await fetch(`${API_BASE}${path}`, {\n      ...init,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(init?.headers ?? {})\n      },\n      cache: \"no-store\",\n      next: { revalidate: 0 }\n    });\n\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`Erro na API (${res.status}): ${text}`);\n    }\n\n    return res.json() as Promise<T>;\n  } catch (error) {\n    console.error(\"Falha ao buscar API\", error);\n    if (\n      error instanceof TypeError ||\n      (error instanceof Error && error.message.toLowerCase().includes(\"fetch failed\"))\n    ) {\n      throw new Error(\n        `Não foi possível conectar à API (${API_BASE}). Verifique se o backend FastAPI está rodando e se NEXT_PUBLIC_API_BASE_URL está configurado.`\n      );\n    }\n    throw error;\n  }\n}\n\nexport type OverviewStats = {\n  total_grupos: number;\n  total_mensagens: number;\n  total_envios: number;\n  generated_at: string;\n};\n\nexport async function getStats(): Promise<OverviewStats> {\n  return apiFetch<OverviewStats>(\"/stats\");\n}\n\nexport async function getDashboardResumo(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any; periodo: any }>(\"/dashboard/resumo\" + query);\n}\n\nexport async function getDashboardTarefas(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any[] }>(\"/dashboard/tarefas-mes\" + query);\n}\n\nexport async function getDashboardPizza(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: Record<string, number> }>(\"/dashboard/pizza\" + query);\n}\n\nexport type Grupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  cr?: string | null;\n  cliente?: string | null;\n  diretor_executivo?: string | null;\n  diretor_regional?: string | null;\n  gerente_regional?: string | null;\n  gerente?: string | null;\n  supervisor?: string | null;\n};\n\nexport async function getGrupos(): Promise<Grupo[]> {\n  return apiFetch<Grupo[]>(\"/grupos\");\n}\n\nexport async function getGrupoFiltros() {\n  return apiFetch(\"/grupos/filtros/meta\");\n}\n\nexport type Agendamento = {\n  id: number;\n  grupo_id: number;\n  nome_grupo: string;\n  cr: string | null;\n  tipo_envio: string;\n  dias_semana: string | null;\n  data_envio: string;\n  hora_inicio: string;\n  hora_fim: string;\n  ativo: boolean;\n};\n\nexport async function getAgendamentos(): Promise<Agendamento[]> {\n  return apiFetch<Agendamento[]>(\"/agendamentos\");\n}\n\nexport type Mensagem = {\n  id: number;\n  mensagem: string;\n  grupos_ids: string[];\n  tipo_recorrencia: string;\n  dias_semana: number[] | null;\n  horario: string;\n  data_inicio: string;\n  data_fim: string | null;\n  ativo: boolean;\n};\n\nexport async function getMensagens(params?: string): Promise<Mensagem[]> {\n  const suffix = params ? `?${params}` : \"\";\n  return apiFetch<Mensagem[]>(`/mensagens${suffix}`);\n}\n\nexport async function getSlaPreview(grupoId: number, payload: any) {\n  return apiFetch(`/sla/preview/${grupoId}`, {\n    method: \"POST\",\n    body: JSON.stringify(payload)\n  });\n}\n\nexport type EnvioGrupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  cr?: string | null;\n};\n\nexport async function getEnvioGrupos(): Promise<EnvioGrupo[]> {\n  return apiFetch<EnvioGrupo[]>(\"/envio/grupos\");\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,WACJ,QAAQ,GAAG,CAAC,wBAAwB,IAAI,QAAQ,GAAG,CAAC,YAAY,IAAI;AAEtE,eAAe,SAAY,IAAY,EAAE,IAAkB;IACzD,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;YAC5C,GAAG,IAAI;YACP,SAAS;gBACP,gBAAgB;gBAChB,GAAI,MAAM,WAAW,CAAC,CAAC;YACzB;YACA,OAAO;YACP,MAAM;gBAAE,YAAY;YAAE;QACxB;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,IAAI,MAAM,CAAC,GAAG,EAAE,MAAM;QACxD;QAEA,OAAO,IAAI,IAAI;IACjB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,IACE,iBAAiB,aAChB,iBAAiB,SAAS,MAAM,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,iBAChE;YACA,MAAM,IAAI,MACR,CAAC,iCAAiC,EAAE,SAAS,8FAA8F,CAAC;QAEhJ;QACA,MAAM;IACR;AACF;AASO,eAAe;IACpB,OAAO,SAAwB;AACjC;AAEO,eAAe,mBAAmB,MAAwB;IAC/D,MAAM,QAAQ,SAAS,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IACjD,OAAO,SAAsC,sBAAsB;AACrE;AAEO,eAAe,oBAAoB,MAAwB;IAChE,MAAM,QAAQ,SAAS,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IACjD,OAAO,SAA0B,2BAA2B;AAC9D;AAEO,eAAe,kBAAkB,MAAwB;IAC9D,MAAM,QAAQ,SAAS,CAAC,CAAC,EAAE,OAAO,QAAQ,IAAI,GAAG;IACjD,OAAO,SAA2C,qBAAqB;AACzE;AAgBO,eAAe;IACpB,OAAO,SAAkB;AAC3B;AAEO,eAAe;IACpB,OAAO,SAAS;AAClB;AAeO,eAAe;IACpB,OAAO,SAAwB;AACjC;AAcO,eAAe,aAAa,MAAe;IAChD,MAAM,SAAS,SAAS,CAAC,CAAC,EAAE,QAAQ,GAAG;IACvC,OAAO,SAAqB,CAAC,UAAU,EAAE,QAAQ;AACnD;AAEO,eAAe,cAAc,OAAe,EAAE,OAAY;IAC/D,OAAO,SAAS,CAAC,aAAa,EAAE,SAAS,EAAE;QACzC,QAAQ;QACR,MAAM,KAAK,SAAS,CAAC;IACvB;AACF;AAUO,eAAe;IACpB,OAAO,SAAuB;AAChC"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/app/dashboard/page.tsx"],"sourcesContent":["import {\n  getDashboardPizza,\n  getDashboardResumo,\n  getDashboardTarefas\n} from \"../../lib/api\";\n\nexport default async function DashboardPage() {\n  try {\n    const [resumo, tarefas, pizza] = await Promise.all([\n      getDashboardResumo(),\n      getDashboardTarefas(),\n      getDashboardPizza()\n    ]);\n\n    return (\n      <div className=\"grid\" style={{ gap: \"1.5rem\" }}>\n        <section className=\"panel\">\n          <h2>Resumo geral</h2>\n          <pre style={{ whiteSpace: \"pre-wrap\", margin: 0 }}>{JSON.stringify(resumo.data, null, 2)}</pre>\n        </section>\n\n        <section className=\"panel\">\n          <h2>Tarefas por dia (mês atual)</h2>\n          <table>\n            <thead>\n              <tr>\n                <th>Dia</th>\n                <th>Finalizadas</th>\n                <th>Não realizadas</th>\n                <th>Em aberto</th>\n                <th>Iniciadas</th>\n              </tr>\n            </thead>\n            <tbody>\n              {tarefas.data.map((item, idx) => (\n                <tr key={idx}>\n                  <td>{item.dia}</td>\n                  <td>{item.finalizadas}</td>\n                  <td>{item.nao_realizadas}</td>\n                  <td>{item.em_aberto}</td>\n                  <td>{item.iniciadas}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </section>\n\n        <section className=\"panel\">\n          <h2>Distribuição por status</h2>\n          <table>\n            <tbody>\n              {Object.entries(pizza.data).map(([status, value]) => (\n                <tr key={status}>\n                  <td style={{ textTransform: \"capitalize\" }}>{status.replace(\"_\", \" \")}</td>\n                  <td>{value}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </section>\n      </div>\n    );\n  } catch (error) {\n    console.error(\"Falha ao carregar dashboard\", error);\n    return (\n      <section className=\"panel\">\n        <h2>Dashboard</h2>\n        <p>Não foi possível carregar os dados do dashboard. Verifique a API e tente novamente.</p>\n      </section>\n    );\n  }\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAMe,eAAe;IAC5B,IAAI;QACF,MAAM,CAAC,QAAQ,SAAS,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;YACjD,IAAA,4IAAkB;YAClB,IAAA,6IAAmB;YACnB,IAAA,2IAAiB;SAClB;QAED,qBACE,0PAAC;YAAI,WAAU;YAAO,OAAO;gBAAE,KAAK;YAAS;;8BAC3C,0PAAC;oBAAQ,WAAU;;sCACjB,0PAAC;sCAAG;;;;;;sCACJ,0PAAC;4BAAI,OAAO;gCAAE,YAAY;gCAAY,QAAQ;4BAAE;sCAAI,KAAK,SAAS,CAAC,OAAO,IAAI,EAAE,MAAM;;;;;;;;;;;;8BAGxF,0PAAC;oBAAQ,WAAU;;sCACjB,0PAAC;sCAAG;;;;;;sCACJ,0PAAC;;8CACC,0PAAC;8CACC,cAAA,0PAAC;;0DACC,0PAAC;0DAAG;;;;;;0DACJ,0PAAC;0DAAG;;;;;;0DACJ,0PAAC;0DAAG;;;;;;0DACJ,0PAAC;0DAAG;;;;;;0DACJ,0PAAC;0DAAG;;;;;;;;;;;;;;;;;8CAGR,0PAAC;8CACE,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,oBACvB,0PAAC;;8DACC,0PAAC;8DAAI,KAAK,GAAG;;;;;;8DACb,0PAAC;8DAAI,KAAK,WAAW;;;;;;8DACrB,0PAAC;8DAAI,KAAK,cAAc;;;;;;8DACxB,0PAAC;8DAAI,KAAK,SAAS;;;;;;8DACnB,0PAAC;8DAAI,KAAK,SAAS;;;;;;;2CALZ;;;;;;;;;;;;;;;;;;;;;;8BAYjB,0PAAC;oBAAQ,WAAU;;sCACjB,0PAAC;sCAAG;;;;;;sCACJ,0PAAC;sCACC,cAAA,0PAAC;0CACE,OAAO,OAAO,CAAC,MAAM,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,QAAQ,MAAM,iBAC9C,0PAAC;;0DACC,0PAAC;gDAAG,OAAO;oDAAE,eAAe;gDAAa;0DAAI,OAAO,OAAO,CAAC,KAAK;;;;;;0DACjE,0PAAC;0DAAI;;;;;;;uCAFE;;;;;;;;;;;;;;;;;;;;;;;;;;;IAUvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,qBACE,0PAAC;YAAQ,WAAU;;8BACjB,0PAAC;8BAAG;;;;;;8BACJ,0PAAC;8BAAE;;;;;;;;;;;;IAGT;AACF"}}]
}