{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/client.ts"],"sourcesContent":["\"use client\";\n\nconst API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL ?? \"http://localhost:5000/api\";\n\ntype Method = \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n\nasync function request<T>(path: string, method: Method, body?: unknown): Promise<T> {\n  const res = await fetch(`${API_BASE}${path}`, {\n    method,\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: body ? JSON.stringify(body) : undefined\n  });\n\n  if (!res.ok) {\n    const text = await res.text();\n    throw new Error(text || `Erro ${res.status}`);\n  }\n\n  if (res.status === 204) {\n    return {} as T;\n  }\n\n  return res.json() as Promise<T>;\n}\n\nexport const clientApi = {\n  put: <T>(path: string, body?: unknown) => request<T>(path, \"PUT\", body),\n  post: <T>(path: string, body?: unknown) => request<T>(path, \"POST\", body),\n  delete: <T>(path: string, body?: unknown) => request<T>(path, \"DELETE\", body)\n};\n"],"names":[],"mappings":";;;;AAAA;AAEA,MAAM,WAAW,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AAIzD,eAAe,QAAW,IAAY,EAAE,MAAc,EAAE,IAAc;IACpE,MAAM,MAAM,MAAM,MAAM,GAAG,WAAW,MAAM,EAAE;QAC5C;QACA,SAAS;YACP,gBAAgB;QAClB;QACA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;IACtC;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,IAAI,MAAM,QAAQ,CAAC,KAAK,EAAE,IAAI,MAAM,EAAE;IAC9C;IAEA,IAAI,IAAI,MAAM,KAAK,KAAK;QACtB,OAAO,CAAC;IACV;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,MAAM,YAAY;IACvB,KAAK,CAAI,MAAc,OAAmB,QAAW,MAAM,OAAO;IAClE,MAAM,CAAI,MAAc,OAAmB,QAAW,MAAM,QAAQ;IACpE,QAAQ,CAAI,MAAc,OAAmB,QAAW,MAAM,UAAU;AAC1E"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/lib/api.ts"],"sourcesContent":["import { clientApi } from \"./client\";\n\nconst API_BASE =\n  process.env.NEXT_PUBLIC_API_BASE_URL ?? process.env.API_BASE_URL ?? \"http://localhost:5000/api\";\n\nasync function apiFetch<T>(path: string, init?: RequestInit): Promise<T> {\n  try {\n    const res = await fetch(`${API_BASE}${path}`, {\n      ...init,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...(init?.headers ?? {})\n      },\n      cache: \"no-store\",\n      next: { revalidate: 0 }\n    });\n\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`Erro na API (${res.status}): ${text}`);\n    }\n\n    return res.json() as Promise<T>;\n  } catch (error) {\n    console.error(\"Falha ao buscar API\", error);\n    if (\n      error instanceof TypeError ||\n      (error instanceof Error && error.message.toLowerCase().includes(\"fetch failed\"))\n    ) {\n      throw new Error(\n        `Não foi possível conectar à API (${API_BASE}). Verifique se o backend FastAPI está rodando e se NEXT_PUBLIC_API_BASE_URL está configurado.`\n      );\n    }\n    throw error;\n  }\n}\n\nexport type OverviewStats = {\n  total_grupos: number;\n  total_mensagens: number;\n  total_envios: number;\n  generated_at: string;\n};\n\nexport async function getStats(): Promise<OverviewStats> {\n  return apiFetch<OverviewStats>(\"/stats\");\n}\n\nexport async function getDashboardResumo(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any; periodo: any }>(\"/dashboard/resumo\" + query);\n}\n\nexport async function getDashboardTarefas(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: any[] }>(\"/dashboard/tarefas-mes\" + query);\n}\n\nexport async function getDashboardPizza(params?: URLSearchParams) {\n  const query = params ? `?${params.toString()}` : \"\";\n  return apiFetch<{ data: Record<string, number> }>(\"/dashboard/pizza\" + query);\n}\n\nexport type Grupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  envio_pdf: boolean;\n  cr?: string | null;\n  cliente?: string | null;\n  pec_01?: string | null;\n  pec_02?: string | null;\n  diretor_executivo?: string | null;\n  diretor_regional?: string | null;\n  gerente_regional?: string | null;\n  gerente?: string | null;\n  supervisor?: string | null;\n};\n\nexport async function getGrupos(): Promise<Grupo[]> {\n  return apiFetch<Grupo[]>(\"/grupos\");\n}\n\nexport async function getGrupoFiltros() {\n  return apiFetch(\"/grupos/filtros/meta\");\n}\n\nexport type Agendamento = {\n  id: number;\n  grupo_id: number;\n  nome_grupo: string;\n  cr: string | null;\n  tipo_envio: string;\n  dias_semana: string | null;\n  data_envio: string;\n  proximo_envio?: string | null;\n  hora_inicio: string;\n  dia_offset_inicio: number;\n  hora_fim: string;\n  dia_offset_fim: number;\n  ativo: boolean;\n  criado_em?: string;\n  atualizado_em?: string | null;\n  ultimo_status?: string | null;\n  ultimo_envio?: string | null;\n  ultimo_erro?: string | null;\n};\n\nexport type AgendamentoListResponse = {\n  items: Agendamento[];\n  total: number;\n  page: number;\n  page_size: number;\n};\n\nexport type AgendamentoFilters = {\n  page?: number;\n  page_size?: number;\n  tipo_envio?: string;\n  ativo?: boolean | string;\n  grupo?: string;\n  cr?: string;\n  dia?: string;\n  data_inicio?: string;\n  data_fim?: string;\n};\n\nexport type EnviarAgoraResponse = {\n  id: number;\n  status: string;\n  message: string;\n};\n\nexport type PdfLinkResponse = {\n  id: number;\n  url: string;\n};\n\nexport type PdfBulkResponse = {\n  successes: PdfLinkResponse[];\n  failures: number[];\n};\n\nexport type BulkDeleteResponse = {\n  removed: number;\n  failures: number[];\n};\n\nfunction buildQuery(params: Record<string, any>): string {\n  const query = new URLSearchParams();\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null || value === \"\") return;\n    query.set(key, String(value));\n  });\n  const text = query.toString();\n  return text ? `?${text}` : \"\";\n}\n\nexport async function getAgendamentos(filters?: AgendamentoFilters): Promise<Agendamento[]> {\n  const response = await getAgendamentosPaged(filters);\n  return response.items;\n}\n\nexport async function getAgendamentosPaged(filters?: AgendamentoFilters): Promise<AgendamentoListResponse> {\n  const query = buildQuery(filters ?? {});\n  return apiFetch<AgendamentoListResponse>(`/agendamentos${query}`);\n}\n\nexport type AgendamentoPayload = {\n  grupo_id: number;\n  tipo_envio: \"resultados\" | \"programadas\";\n  dias_semana: string[];\n  data_envio: string;\n  hora_inicio: string;\n  dia_offset_inicio: number;\n  hora_fim: string;\n  dia_offset_fim: number;\n};\n\nexport async function createAgendamento(payload: AgendamentoPayload) {\n  return clientApi.post(\"/agendamentos\", payload);\n}\n\nexport async function updateAgendamento(id: number, payload: AgendamentoPayload & { ativo?: boolean }) {\n  return clientApi.put(`/agendamentos/${id}`, payload);\n}\n\nexport async function deleteAgendamento(id: number) {\n  return clientApi.delete(`/agendamentos/${id}`);\n}\n\nexport async function cloneAgendamento(id: number) {\n  return clientApi.post<{ id: number }>(`/agendamentos/${id}/clone`);\n}\n\nexport async function pauseAgendamento(id: number) {\n  return clientApi.post<{ id: number; ativo: boolean }>(`/agendamentos/${id}/pause`);\n}\n\nexport async function resumeAgendamento(id: number) {\n  return clientApi.post<{ id: number; ativo: boolean }>(`/agendamentos/${id}/resume`);\n}\n\nexport async function sendAgendamentoNow(id: number) {\n  return clientApi.post<EnviarAgoraResponse>(`/agendamentos/${id}/send-now`);\n}\n\nexport async function generatePdfAgendamento(id: number) {\n  return clientApi.post<PdfLinkResponse>(`/agendamentos/${id}/pdf`);\n}\n\nexport async function generatePdfBulk(ids: number[]) {\n  return clientApi.post<PdfBulkResponse>(\"/agendamentos/bulk/pdf\", { ids });\n}\n\nexport async function deleteAgendamentosBulk(ids: number[]) {\n  return clientApi.delete<BulkDeleteResponse>(\"/agendamentos/bulk\", { ids });\n}\n\nexport type AgendamentoLog = {\n  id: number;\n  data_envio: string;\n  status: string;\n  mensagem_enviada: string | null;\n  resposta_api: string | null;\n  erro: string | null;\n  criado_em: string;\n  nome_grupo?: string | null;\n};\n\nexport type AgendamentoLogResponse = {\n  items: AgendamentoLog[];\n  total: number;\n  page: number;\n  page_size: number;\n};\n\nexport async function getAgendamentoLogs(agendamentoId: number, page = 1, pageSize = 10) {\n  const query = buildQuery({ page, page_size: pageSize });\n  return apiFetch<AgendamentoLogResponse>(`/agendamentos/${agendamentoId}/logs${query}`);\n}\n\nexport type Mensagem = {\n  id: number;\n  mensagem: string;\n  grupos_ids: string[];\n  tipo_recorrencia: string;\n  dias_semana: number[] | null;\n  horario: string;\n  data_inicio: string;\n  data_fim: string | null;\n  ativo: boolean;\n};\n\nexport async function getMensagens(params?: string): Promise<Mensagem[]> {\n  const suffix = params ? `?${params}` : \"\";\n  return apiFetch<Mensagem[]>(`/mensagens${suffix}`);\n}\n\nexport async function getSlaPreview(grupoId: number, payload: any) {\n  return apiFetch(`/sla/preview/${grupoId}`, {\n    method: \"POST\",\n    body: JSON.stringify(payload)\n  });\n}\n\nexport type SlaTemplate = {\n  resultados: string;\n  programadas: string;\n};\n\nexport async function fetchSlaTemplate(): Promise<SlaTemplate> {\n  return apiFetch<SlaTemplate>(\"/sla/template\");\n}\n\nexport async function updateSlaTemplate(payload: SlaTemplate): Promise<SlaTemplate> {\n  return clientApi.put<SlaTemplate>(\"/sla/template\", payload);\n}\n\nexport type EnvioGrupo = {\n  id: number;\n  group_id: string;\n  nome_grupo: string;\n  envio: boolean;\n  cr?: string | null;\n};\n\nexport async function getEnvioGrupos(): Promise<EnvioGrupo[]> {\n  return apiFetch<EnvioGrupo[]>(\"/envio/grupos\");\n}\n\nexport type EvolutionGroup = {\n  group_id: string;\n  nome: string;\n  cr?: string | null;\n};\n\nexport type EvolutionGroupsResponse = {\n  total: number;\n  page: number;\n  page_size: number;\n  grupos: EvolutionGroup[];\n};\n\nexport async function getEvolutionGroups(page = 1, pageSize = 25): Promise<EvolutionGroupsResponse> {\n  return apiFetch(`/evolution/groups?page=${page}&page_size=${pageSize}`);\n}\n\nexport async function getAllEvolutionGroups(): Promise<EvolutionGroupsResponse> {\n  return apiFetch(\"/evolution/groups/all\");\n}\n\nexport async function importEvolutionGroups(grupos: EvolutionGroup[]) {\n  return clientApi.post(\"/evolution/import\", { grupos });\n}\n\nexport type GrupoCrItem = {\n  id: number;\n  nome_grupo: string;\n  cr: string;\n};\n\nexport async function getGroupsWithCR(): Promise<GrupoCrItem[]> {\n  return apiFetch<GrupoCrItem[]>(\"/grupos/com-cr\");\n}\n\nexport async function syncGroupStructure(grupoId: number) {\n  return clientApi.post(`/grupos/${grupoId}/sync-estrutura`);\n}\n\nexport async function deleteGroups(ids: number[]) {\n  return clientApi.delete<{ removidos: number }>(\"/grupos\", { ids });\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/envio-sla/constants.ts"],"sourcesContent":["export const weekdayOptions = [\n  { label: \"Seg\", value: \"seg\" },\n  { label: \"Ter\", value: \"ter\" },\n  { label: \"Qua\", value: \"qua\" },\n  { label: \"Qui\", value: \"qui\" },\n  { label: \"Sex\", value: \"sex\" },\n  { label: \"Sáb\", value: \"sab\" },\n  { label: \"Dom\", value: \"dom\" }\n];\n\nexport const tipoEnvioOptions = [\n  { label: \"Resultados\", value: \"resultados\" },\n  { label: \"Programadas\", value: \"programadas\" }\n];\n\nexport const templateVariables = [\n  \"{{saudacao}}\",\n  \"{{periodo_inicio}}\",\n  \"{{periodo_fim}}\",\n  \"{{periodo_completo}}\",\n  \"{{finalizadas}}\",\n  \"{{nao_realizadas}}\",\n  \"{{em_aberto}}\",\n  \"{{iniciadas}}\",\n  \"{{total}}\",\n  \"{{total_programadas}}\",\n  \"{{porcentagem}}\",\n  \"{{emoji}}\",\n  \"{{feedback}}\",\n  \"{{data_envio}}\"\n];\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,iBAAiB;IAC5B;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAO,OAAO;IAAM;IAC7B;QAAE,OAAO;QAAO,OAAO;IAAM;CAC9B;AAEM,MAAM,mBAAmB;IAC9B;QAAE,OAAO;QAAc,OAAO;IAAa;IAC3C;QAAE,OAAO;QAAe,OAAO;IAAc;CAC9C;AAEM,MAAM,oBAAoB;IAC/B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 319, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/envio-sla/AgendamentoModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  type Agendamento,\n  type AgendamentoPayload,\n  type Grupo,\n  createAgendamento,\n  getGrupos,\n  updateAgendamento\n} from \"../../lib/api\";\nimport { tipoEnvioOptions, weekdayOptions } from \"./constants\";\n\ntype Props = {\n  mode: \"create\" | \"edit\";\n  agendamento?: Agendamento;\n  onClose: () => void;\n  onSaved: (message: string) => void;\n};\n\nexport default function AgendamentoModal({ mode, agendamento, onClose, onSaved }: Props) {\n  const [grupos, setGrupos] = useState<Grupo[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [form, setForm] = useState<AgendamentoPayload>(() => {\n    if (!agendamento) {\n      return {\n        grupo_id: 0,\n        tipo_envio: \"resultados\",\n        dias_semana: [],\n        data_envio: \"\",\n        hora_inicio: \"08:00\",\n        dia_offset_inicio: 0,\n        hora_fim: \"18:00\",\n        dia_offset_fim: 0\n      };\n    }\n    return {\n      grupo_id: agendamento.grupo_id,\n      tipo_envio: agendamento.tipo_envio as \"resultados\" | \"programadas\",\n      dias_semana: agendamento.dias_semana\n        ? agendamento.dias_semana.split(\",\").map((d) => d.trim()).filter(Boolean)\n        : [],\n      data_envio: toDateInput(agendamento.data_envio),\n      hora_inicio: agendamento.hora_inicio?.slice(0, 5) ?? \"08:00\",\n      dia_offset_inicio: agendamento.dia_offset_inicio ?? 0,\n      hora_fim: agendamento.hora_fim?.slice(0, 5) ?? \"18:00\",\n      dia_offset_fim: agendamento.dia_offset_fim ?? 0\n    };\n  });\n\n  useEffect(() => {\n    async function load() {\n      try {\n        const data = await getGrupos();\n        setGrupos(data);\n      } catch (err: any) {\n        setError(err.message ?? \"Erro ao carregar grupos disponíveis.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    load();\n  }, []);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    if (!form.grupo_id) {\n      setError(\"Selecione um grupo.\");\n      return;\n    }\n    if (!form.data_envio) {\n      setError(\"Informe a primeira data de envio.\");\n      return;\n    }\n    setSaving(true);\n    setError(null);\n    const payload: AgendamentoPayload = {\n      ...form,\n      data_envio: new Date(form.data_envio).toISOString(),\n      hora_inicio: normalizeTime(form.hora_inicio),\n      hora_fim: normalizeTime(form.hora_fim)\n    };\n    try {\n      if (mode === \"edit\" && agendamento) {\n        await updateAgendamento(agendamento.id, payload);\n        onSaved(\"Agendamento atualizado.\");\n      } else {\n        await createAgendamento(payload);\n        onSaved(\"Agendamento criado.\");\n      }\n    } catch (err: any) {\n      setError(err.message ?? \"Erro ao salvar agendamento.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal max-h-[90vh] w-full max-w-3xl overflow-y-auto\">\n        <div className=\"modal-header\">\n          <h3>{mode === \"create\" ? \"Novo agendamento SLA\" : `Editar ${agendamento?.nome_grupo}`}</h3>\n          <button type=\"button\" className=\"secondary\" onClick={onClose}>\n            Fechar\n          </button>\n        </div>\n        {loading ? (\n          <p className=\"text-sm text-textMuted\">Carregando grupos...</p>\n        ) : (\n          <form className=\"grid gap-4\" onSubmit={handleSubmit}>\n            <label className=\"text-sm font-semibold\">\n              Grupo\n              <select\n                className=\"mt-1 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\n                value={form.grupo_id || \"\"}\n                onChange={(e) => setForm((prev) => ({ ...prev, grupo_id: Number(e.target.value) }))}\n                required\n              >\n                <option value=\"\">Selecione o grupo</option>\n                {grupos.map((grupo) => (\n                  <option key={grupo.id} value={grupo.id}>\n                    {grupo.nome_grupo}\n                  </option>\n                ))}\n              </select>\n            </label>\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <label className=\"text-sm font-semibold\">\n                Tipo de envio\n                <select\n                  className=\"mt-1 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\n                  value={form.tipo_envio}\n                  onChange={(e) => setForm((prev) => ({ ...prev, tipo_envio: e.target.value as \"resultados\" | \"programadas\" }))}\n                >\n                  {tipoEnvioOptions.map((opt) => (\n                    <option key={opt.value} value={opt.value}>\n                      {opt.label}\n                    </option>\n                  ))}\n                </select>\n              </label>\n              <label className=\"text-sm font-semibold\">\n                Primeira execução\n                <input\n                  type=\"datetime-local\"\n                  className=\"mt-1 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\n                  value={form.data_envio}\n                  onChange={(e) => setForm((prev) => ({ ...prev, data_envio: e.target.value }))}\n                  required\n                />\n              </label>\n            </div>\n            <fieldset className=\"rounded-xl border border-border/60 p-3\">\n              <legend className=\"px-2 text-sm font-semibold text-text\">Dias da semana</legend>\n              <div className=\"flex flex-wrap gap-3 text-sm\">\n                {weekdayOptions.map((opt) => {\n                  const checked = form.dias_semana.includes(opt.value);\n                  return (\n                    <label key={opt.value} className=\"flex items-center gap-2\">\n                      <input\n                        type=\"checkbox\"\n                        checked={checked}\n                        onChange={(e) => {\n                          setForm((prev) => {\n                            const dias = new Set(prev.dias_semana);\n                            if (e.target.checked) dias.add(opt.value);\n                            else dias.delete(opt.value);\n                            return { ...prev, dias_semana: Array.from(dias) };\n                          });\n                        }}\n                      />\n                      {opt.label}\n                    </label>\n                  );\n                })}\n              </div>\n            </fieldset>\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <label className=\"text-sm font-semibold\">\n                Hora inicial\n                <input\n                  type=\"time\"\n                  className=\"mt-1 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\n                  value={form.hora_inicio}\n                  onChange={(e) => setForm((prev) => ({ ...prev, hora_inicio: e.target.value }))}\n                />\n              </label>\n              <label className=\"text-sm font-semibold\">\n                Offset início (dias)\n                <input\n                  type=\"number\"\n                  className=\"mt-1 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\n                  value={form.dia_offset_inicio}\n                  onChange={(e) => setForm((prev) => ({ ...prev, dia_offset_inicio: Number(e.target.value) }))}\n                />\n              </label>\n              <label className=\"text-sm font-semibold\">\n                Hora final\n                <input\n                  type=\"time\"\n                  className=\"mt-1 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\n                  value={form.hora_fim}\n                  onChange={(e) => setForm((prev) => ({ ...prev, hora_fim: e.target.value }))}\n                />\n              </label>\n              <label className=\"text-sm font-semibold\">\n                Offset fim (dias)\n                <input\n                  type=\"number\"\n                  className=\"mt-1 w-full rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\n                  value={form.dia_offset_fim}\n                  onChange={(e) => setForm((prev) => ({ ...prev, dia_offset_fim: Number(e.target.value) }))}\n                />\n              </label>\n            </div>\n            {error && <p className=\"text-sm text-rose-300\">{error}</p>}\n            <div className=\"flex justify-end gap-3\">\n              <button type=\"button\" className=\"secondary\" onClick={onClose}>\n                Cancelar\n              </button>\n              <button type=\"submit\" disabled={saving} className=\"rounded-xl bg-accent px-4 py-2 text-sm font-semibold text-slate-900\">\n                {saving ? \"Salvando...\" : \"Salvar\"}\n              </button>\n            </div>\n          </form>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction toDateInput(value: string | null | undefined) {\n  if (!value) return \"\";\n  const date = new Date(value);\n  return date.toISOString().slice(0, 16);\n}\n\nfunction normalizeTime(value: string) {\n  if (!value) return \"00:00\";\n  return value.length === 5 ? `${value}:00` : value;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 777, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/envio-sla/LogsModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { type Agendamento, type AgendamentoLog, getAgendamentoLogs } from \"../../lib/api\";\n\ntype Props = {\n  agendamento: Agendamento;\n  onClose: () => void;\n};\n\nexport default function LogsModal({ agendamento, onClose }: Props) {\n  const [logs, setLogs] = useState<AgendamentoLog[]>([]);\n  const [page, setPage] = useState(1);\n  const [pageSize] = useState(10);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const totalPages = Math.max(1, Math.ceil(total / pageSize));\n\n  useEffect(() => {\n    let cancelled = false;\n    async function load() {\n      setLoading(true);\n      setError(null);\n      try {\n        const response = await getAgendamentoLogs(agendamento.id, page, pageSize);\n        if (!cancelled) {\n          setLogs(response.items);\n          setTotal(response.total);\n        }\n      } catch (err: any) {\n        if (!cancelled) setError(err.message ?? \"Erro ao carregar logs.\");\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    }\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, [agendamento.id, page, pageSize]);\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal max-h-[85vh] w-full max-w-3xl overflow-y-auto\">\n        <div className=\"modal-header\">\n          <div>\n            <h3>Logs de {agendamento.nome_grupo}</h3>\n            <p className=\"text-sm text-textMuted\">Monitoramento de envios</p>\n          </div>\n          <button type=\"button\" className=\"secondary\" onClick={onClose}>\n            Fechar\n          </button>\n        </div>\n        {error && <p className=\"text-sm text-rose-300\">{error}</p>}\n        {loading ? (\n          <p className=\"text-sm text-textMuted\">Carregando logs...</p>\n        ) : (\n          <div className=\"space-y-3\">\n            {logs.map((log) => (\n              <div key={log.id} className=\"rounded-xl border border-border/60 bg-surface/80 p-3 text-sm\">\n                <div className=\"flex items-center justify-between text-xs text-textMuted\">\n                  <span>{log.data_envio || log.criado_em}</span>\n                  <span\n                    className={`rounded-full px-2 py-0.5 font-semibold ${\n                      log.status === \"sucesso\"\n                        ? \"bg-emerald-500/20 text-emerald-200\"\n                        : \"bg-rose-500/20 text-rose-200\"\n                    }`}\n                  >\n                    {log.status}\n                  </span>\n                </div>\n                {log.erro && <p className=\"mt-2 text-rose-300\">{log.erro}</p>}\n                {log.resposta_api && (\n                  <details className=\"mt-2 text-xs text-textMuted\">\n                    <summary className=\"cursor-pointer text-text\">Detalhes</summary>\n                    <pre className=\"mt-1 whitespace-pre-wrap rounded bg-surfaceMuted/40 p-2 text-xs text-textMuted\">\n                      {log.resposta_api}\n                    </pre>\n                  </details>\n                )}\n              </div>\n            ))}\n            {!logs.length && <p className=\"text-sm text-textMuted\">Ainda não há registros.</p>}\n          </div>\n        )}\n        <div className=\"mt-4 flex items-center justify-between text-xs text-textMuted\">\n          <span>\n            Página {page} de {totalPages}\n          </span>\n          <div className=\"space-x-2\">\n            <button\n              type=\"button\"\n              disabled={page <= 1}\n              onClick={() => setPage((prev) => Math.max(1, prev - 1))}\n              className=\"rounded border border-border px-2 py-1 text-text disabled:opacity-40\"\n            >\n              ◀\n            </button>\n            <button\n              type=\"button\"\n              disabled={page >= totalPages}\n              onClick={() => setPage((prev) => Math.min(totalPages, prev + 1))}\n              className=\"rounded border border-border px-2 py-1 text-text disabled:opacity-40\"\n            >\n              ▶\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUe,SAAS,UAAU,EAAE,WAAW,EAAE,OAAO,EAAS;IAC/D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAmB,EAAE;IACrD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,GAAG,IAAA,6NAAQ,EAAC;IAC5B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAgB;IAClD,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ;IAEjD,IAAA,8NAAS,EAAC;QACR,IAAI,YAAY;QAChB,eAAe;YACb,WAAW;YACX,SAAS;YACT,IAAI;gBACF,MAAM,WAAW,MAAM,IAAA,4IAAkB,EAAC,YAAY,EAAE,EAAE,MAAM;gBAChE,IAAI,CAAC,WAAW;oBACd,QAAQ,SAAS,KAAK;oBACtB,SAAS,SAAS,KAAK;gBACzB;YACF,EAAE,OAAO,KAAU;gBACjB,IAAI,CAAC,WAAW,SAAS,IAAI,OAAO,IAAI;YAC1C,SAAU;gBACR,IAAI,CAAC,WAAW,WAAW;YAC7B;QACF;QACA;QACA,OAAO;YACL,YAAY;QACd;IACF,GAAG;QAAC,YAAY,EAAE;QAAE;QAAM;KAAS;IAEnC,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;;8CACC,0PAAC;;wCAAG;wCAAS,YAAY,UAAU;;;;;;;8CACnC,0PAAC;oCAAE,WAAU;8CAAyB;;;;;;;;;;;;sCAExC,0PAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAY,SAAS;sCAAS;;;;;;;;;;;;gBAI/D,uBAAS,0PAAC;oBAAE,WAAU;8BAAyB;;;;;;gBAC/C,wBACC,0PAAC;oBAAE,WAAU;8BAAyB;;;;;yCAEtC,0PAAC;oBAAI,WAAU;;wBACZ,KAAK,GAAG,CAAC,CAAC,oBACT,0PAAC;gCAAiB,WAAU;;kDAC1B,0PAAC;wCAAI,WAAU;;0DACb,0PAAC;0DAAM,IAAI,UAAU,IAAI,IAAI,SAAS;;;;;;0DACtC,0PAAC;gDACC,WAAW,CAAC,uCAAuC,EACjD,IAAI,MAAM,KAAK,YACX,uCACA,gCACJ;0DAED,IAAI,MAAM;;;;;;;;;;;;oCAGd,IAAI,IAAI,kBAAI,0PAAC;wCAAE,WAAU;kDAAsB,IAAI,IAAI;;;;;;oCACvD,IAAI,YAAY,kBACf,0PAAC;wCAAQ,WAAU;;0DACjB,0PAAC;gDAAQ,WAAU;0DAA2B;;;;;;0DAC9C,0PAAC;gDAAI,WAAU;0DACZ,IAAI,YAAY;;;;;;;;;;;;;+BAlBf,IAAI,EAAE;;;;;wBAwBjB,CAAC,KAAK,MAAM,kBAAI,0PAAC;4BAAE,WAAU;sCAAyB;;;;;;;;;;;;8BAG3D,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;;gCAAK;gCACI;gCAAK;gCAAK;;;;;;;sCAEpB,0PAAC;4BAAI,WAAU;;8CACb,0PAAC;oCACC,MAAK;oCACL,UAAU,QAAQ;oCAClB,SAAS,IAAM,QAAQ,CAAC,OAAS,KAAK,GAAG,CAAC,GAAG,OAAO;oCACpD,WAAU;8CACX;;;;;;8CAGD,0PAAC;oCACC,MAAK;oCACL,UAAU,QAAQ;oCAClB,SAAS,IAAM,QAAQ,CAAC,OAAS,KAAK,GAAG,CAAC,YAAY,OAAO;oCAC7D,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}},
    {"offset": {"line": 1038, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/envio-sla/TemplateModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport type { SlaTemplate } from \"../../lib/api\";\ntype Props = {\n  template: SlaTemplate | null;\n  loading: boolean;\n  saving: boolean;\n  error: string | null;\n  variables: string[];\n  onRetry: () => void;\n  onClose: () => void;\n  onSave: (template: SlaTemplate) => Promise<void>;\n};\n\nexport default function TemplateModal({ template, loading, saving, error, variables, onRetry, onClose, onSave }: Props) {\n  const [localTemplate, setLocalTemplate] = useState<SlaTemplate>(\n    template ?? { resultados: \"\", programadas: \"\" }\n  );\n\n  useEffect(() => {\n    if (template) setLocalTemplate(template);\n  }, [template]);\n\n  const handleSubmit = async (event: React.FormEvent) => {\n    event.preventDefault();\n    await onSave(localTemplate);\n  };\n\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal max-h-[90vh] w-full max-w-4xl overflow-y-auto\">\n        <div className=\"modal-header\">\n          <h3>Editar template SLA</h3>\n          <button type=\"button\" className=\"secondary\" onClick={onClose}>\n            Fechar\n          </button>\n        </div>\n        {loading ? (\n          <p className=\"text-sm text-textMuted\">Carregando template...</p>\n        ) : error ? (\n          <div className=\"space-y-3 text-sm\">\n            <p className=\"text-rose-300\">{error}</p>\n            <button className=\"rounded-xl border border-border px-4 py-2 text-text\" onClick={onRetry}>\n              Tentar novamente\n            </button>\n          </div>\n        ) : (\n          <form className=\"space-y-4\" onSubmit={handleSubmit}>\n            <div className=\"flex items-center gap-2 text-sm text-textMuted\">\n              <span role=\"img\" aria-label=\"info\" title={`Variáveis: ${variables.join(\", \")}`}>\n                ℹ️\n              </span>\n              Variáveis permitidas: {variables.join(\", \")}\n            </div>\n            <label className=\"text-sm font-semibold text-text\">\n              Template - Resultados\n              <textarea\n                className=\"mt-1 w-full rounded-xl border border-border bg-surface px-3 py-2 text-sm text-text\"\n                rows={8}\n                value={localTemplate.resultados}\n                onChange={(e) => setLocalTemplate((prev) => ({ ...prev, resultados: e.target.value }))}\n              />\n            </label>\n            <label className=\"text-sm font-semibold text-text\">\n              Template - Programadas\n              <textarea\n                className=\"mt-1 w-full rounded-xl border border-border bg-surface px-3 py-2 text-sm text-text\"\n                rows={8}\n                value={localTemplate.programadas}\n                onChange={(e) => setLocalTemplate((prev) => ({ ...prev, programadas: e.target.value }))}\n              />\n            </label>\n            <div className=\"flex justify-end gap-3\">\n              <button type=\"button\" className=\"secondary\" onClick={onClose}>\n                Cancelar\n              </button>\n              <button\n                type=\"submit\"\n                disabled={saving}\n                className=\"rounded-xl bg-accent px-4 py-2 text-sm font-semibold text-slate-900\"\n              >\n                {saving ? \"Salvando...\" : \"Salvar template\"}\n              </button>\n            </div>\n          </form>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAee,SAAS,cAAc,EAAE,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,MAAM,EAAS;IACpH,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6NAAQ,EAChD,YAAY;QAAE,YAAY;QAAI,aAAa;IAAG;IAGhD,IAAA,8NAAS,EAAC;QACR,IAAI,UAAU,iBAAiB;IACjC,GAAG;QAAC;KAAS;IAEb,MAAM,eAAe,OAAO;QAC1B,MAAM,cAAc;QACpB,MAAM,OAAO;IACf;IAEA,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;sCAAG;;;;;;sCACJ,0PAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAY,SAAS;sCAAS;;;;;;;;;;;;gBAI/D,wBACC,0PAAC;oBAAE,WAAU;8BAAyB;;;;;2BACpC,sBACF,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAE,WAAU;sCAAiB;;;;;;sCAC9B,0PAAC;4BAAO,WAAU;4BAAsD,SAAS;sCAAS;;;;;;;;;;;yCAK5F,0PAAC;oBAAK,WAAU;oBAAY,UAAU;;sCACpC,0PAAC;4BAAI,WAAU;;8CACb,0PAAC;oCAAK,MAAK;oCAAM,cAAW;oCAAO,OAAO,CAAC,WAAW,EAAE,UAAU,IAAI,CAAC,OAAO;8CAAE;;;;;;gCAEzE;gCACgB,UAAU,IAAI,CAAC;;;;;;;sCAExC,0PAAC;4BAAM,WAAU;;gCAAkC;8CAEjD,0PAAC;oCACC,WAAU;oCACV,MAAM;oCACN,OAAO,cAAc,UAAU;oCAC/B,UAAU,CAAC,IAAM,iBAAiB,CAAC,OAAS,CAAC;gDAAE,GAAG,IAAI;gDAAE,YAAY,EAAE,MAAM,CAAC,KAAK;4CAAC,CAAC;;;;;;;;;;;;sCAGxF,0PAAC;4BAAM,WAAU;;gCAAkC;8CAEjD,0PAAC;oCACC,WAAU;oCACV,MAAM;oCACN,OAAO,cAAc,WAAW;oCAChC,UAAU,CAAC,IAAM,iBAAiB,CAAC,OAAS,CAAC;gDAAE,GAAG,IAAI;gDAAE,aAAa,EAAE,MAAM,CAAC,KAAK;4CAAC,CAAC;;;;;;;;;;;;sCAGzF,0PAAC;4BAAI,WAAU;;8CACb,0PAAC;oCAAO,MAAK;oCAAS,WAAU;oCAAY,SAAS;8CAAS;;;;;;8CAG9D,0PAAC;oCACC,MAAK;oCACL,UAAU;oCACV,WAAU;8CAET,SAAS,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ1C"}},
    {"offset": {"line": 1246, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/envio-sla/ConfirmModal.tsx"],"sourcesContent":["\"use client\";\n\ntype Props = {\n  title: string;\n  description: string;\n  confirmLabel: string;\n  cancelLabel: string;\n  onConfirm: () => void;\n  onCancel: () => void;\n};\n\nexport default function ConfirmModal({ title, description, confirmLabel, cancelLabel, onConfirm, onCancel }: Props) {\n  return (\n    <div className=\"modal-backdrop\">\n      <div className=\"modal max-w-lg\">\n        <div className=\"modal-header\">\n          <h3>{title}</h3>\n        </div>\n        <p className=\"text-sm text-textMuted\">{description}</p>\n        <div className=\"flex justify-end gap-3\">\n          <button type=\"button\" className=\"secondary\" onClick={onCancel}>\n            {cancelLabel}\n          </button>\n          <button type=\"button\" className=\"rounded-xl bg-accent px-4 py-2 text-sm font-semibold text-slate-900\" onClick={onConfirm}>\n            {confirmLabel}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAWe,SAAS,aAAa,EAAE,KAAK,EAAE,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAS;IAChH,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC;oBAAI,WAAU;8BACb,cAAA,0PAAC;kCAAI;;;;;;;;;;;8BAEP,0PAAC;oBAAE,WAAU;8BAA0B;;;;;;8BACvC,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAY,SAAS;sCAClD;;;;;;sCAEH,0PAAC;4BAAO,MAAK;4BAAS,WAAU;4BAAsE,SAAS;sCAC5G;;;;;;;;;;;;;;;;;;;;;;;AAMb"}},
    {"offset": {"line": 1326, "column": 0}, "map": {"version":3,"sources":["file:///C:/Bots/Git/envio_sla_vista/frontend/components/envio-sla/EnvioSlaView.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport {\r\n  type Agendamento,\r\n  type AgendamentoFilters,\r\n  type SlaTemplate,\n  cloneAgendamento,\n  deleteAgendamento,\n  deleteAgendamentosBulk,\n  fetchSlaTemplate,\n  getAgendamentosPaged,\n  pauseAgendamento,\n  resumeAgendamento,\n  generatePdfAgendamento,\n  generatePdfBulk,\n  sendAgendamentoNow,\n  updateSlaTemplate\n} from \"../../lib/api\";\nimport { templateVariables, tipoEnvioOptions } from \"./constants\";\r\nimport AgendamentoModal from \"./AgendamentoModal\";\r\nimport LogsModal from \"./LogsModal\";\r\nimport TemplateModal from \"./TemplateModal\";\r\nimport ConfirmModal from \"./ConfirmModal\";\r\n\r\nconst ACCENT_BUTTON_CLASS =\r\n  \"bg-accent text-[#0f172a] font-semibold shadow-panel transition hover:bg-cyan-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-cyan-200/60 disabled:opacity-50\";\r\n\r\ntype TemplateState = {\r\n  open: boolean;\r\n  confirm: boolean;\r\n  data: SlaTemplate | null;\r\n  loading: boolean;\r\n  saving: boolean;\r\n  error: string | null;\r\n};\r\n\r\ntype ModalState = {\r\n  open: boolean;\r\n  mode: \"create\" | \"edit\";\r\n  agendamento?: Agendamento | null;\r\n};\r\n\r\ntype LogsState = {\r\n  open: boolean;\r\n  agendamento?: Agendamento | null;\r\n};\r\n\r\nexport default function EnvioSlaView() {\r\n  const [page, setPage] = useState(1);\r\n  const [pageSize, setPageSize] = useState(10);\r\n  const [filters, setFilters] = useState({\r\n    grupo: \"\",\r\n    cr: \"\",\r\n    tipo_envio: \"\",\r\n    status: \"todos\",\r\n    dia: \"\"\r\n  });\r\n  const [pendingFilters, setPendingFilters] = useState(filters);\r\n  const [agendamentos, setAgendamentos] = useState<Agendamento[]>([]);\n  const [total, setTotal] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [statusMessage, setStatusMessage] = useState<string | null>(null);\n  const [selectedIds, setSelectedIds] = useState<number[]>([]);\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [modal, setModal] = useState<ModalState>({ open: false, mode: \"create\" });\r\n  const [logsState, setLogsState] = useState<LogsState>({ open: false });\r\n  const [templateState, setTemplateState] = useState<TemplateState>({\r\n    open: false,\r\n    confirm: false,\r\n    data: null,\r\n    loading: false,\r\n    saving: false,\r\n    error: null\r\n  });\r\n\r\n  const totalPages = useMemo(() => Math.max(1, Math.ceil(total / pageSize)), [total, pageSize]);\r\n\r\n  const fetchAgendamentos = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const payload: AgendamentoFilters = {\r\n        page,\r\n        page_size: pageSize,\r\n        grupo: filters.grupo || undefined,\r\n        cr: filters.cr || undefined,\r\n        tipo_envio: filters.tipo_envio || undefined,\r\n        dia: filters.dia || undefined\r\n      };\r\n      if (filters.status === \"ativos\") payload.ativo = true;\r\n      if (filters.status === \"pausados\") payload.ativo = false;\r\n      const response = await getAgendamentosPaged(payload);\r\n      setAgendamentos(response.items);\r\n      setTotal(response.total);\r\n    } catch (err: any) {\r\n      setError(err.message ?? \"Erro ao carregar agendamentos.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\n    fetchAgendamentos();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [page, pageSize, filters]);\n\n  useEffect(() => {\n    setSelectedIds((prev) => prev.filter((id) => agendamentos.some((item) => item.id === id)));\n  }, [agendamentos]);\n\n  const allIds = useMemo(() => agendamentos.map((item) => item.id), [agendamentos]);\n  const isAllSelected = allIds.length > 0 && allIds.every((id) => selectedIds.includes(id));\n  const hasSelection = selectedIds.length > 0;\n\n  const toggleSelect = (id: number) => {\n    setSelectedIds((prev) => (prev.includes(id) ? prev.filter((item) => item !== id) : [...prev, id]));\n  };\n\n  const toggleSelectAll = () => {\n    if (!allIds.length) return;\n    if (isAllSelected) {\n      setSelectedIds((prev) => prev.filter((id) => !allIds.includes(id)));\n    } else {\n      setSelectedIds((prev) => Array.from(new Set([...prev, ...allIds])));\n    }\n  };\n\n  const clearSelection = () => setSelectedIds([]);\n\n  const refresh = async (message?: string) => {\r\n    await fetchAgendamentos();\r\n    if (message) {\r\n      setStatusMessage(message);\r\n      setTimeout(() => setStatusMessage(null), 3000);\r\n    }\r\n  };\r\n\r\n  const handleApplyFilters = (event: React.FormEvent) => {\r\n    event.preventDefault();\r\n    setFilters(pendingFilters);\r\n    setPage(1);\r\n  };\r\n\r\n  const handleResetFilters = () => {\r\n    const clean = { grupo: \"\", cr: \"\", tipo_envio: \"\", status: \"todos\", dia: \"\" };\r\n    setPendingFilters(clean);\r\n    setFilters(clean);\r\n    setPage(1);\r\n  };\r\n\r\n  const openCreateModal = () => setModal({ open: true, mode: \"create\" });\r\n  const openEditModal = (agendamento: Agendamento) => setModal({ open: true, mode: \"edit\", agendamento });\r\n  const closeModal = () => setModal({ open: false, mode: \"create\", agendamento: undefined });\r\n\r\n  const handleDelete = async (agendamento: Agendamento) => {\n    if (!confirm(`Remover o agendamento do grupo ${agendamento.nome_grupo}?`)) return;\n    try {\n      await deleteAgendamento(agendamento.id);\n      setSelectedIds((prev) => prev.filter((value) => value !== agendamento.id));\n      refresh(\"Agendamento removido.\");\n    } catch (err: any) {\n      setStatusMessage(err.message ?? \"Erro ao remover agendamento.\");\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (!hasSelection) return;\n    if (!confirm(`Remover ${selectedIds.length} agendamento(s) selecionado(s)?`)) return;\n    try {\n      const response = await deleteAgendamentosBulk(selectedIds);\n      setStatusMessage(\n        `Agendamentos removidos: ${response.removed}${\n          response.failures.length ? ` | Falhas: ${response.failures.join(\", \")}` : \"\"\n        }.`\n      );\n      clearSelection();\n      refresh();\n    } catch (err: any) {\n      setStatusMessage(err.message ?? \"Erro ao remover agendamentos.\");\n    }\n  };\n\n  const handleGeneratePdf = async (agendamentoId: number) => {\n    try {\n      const result = await generatePdfAgendamento(agendamentoId);\n      window.open(result.url, \"_blank\", \"noopener\");\n      setStatusMessage(\"PDF gerado.\");\n    } catch (err: any) {\n      setStatusMessage(err.message ?? \"Erro ao gerar PDF.\");\n    }\n  };\n\n  const handleBulkGeneratePdf = async () => {\n    if (!hasSelection) return;\n    try {\n      const result = await generatePdfBulk(selectedIds);\n      result.successes.forEach(({ url }) => window.open(url, \"_blank\", \"noopener\"));\n      setStatusMessage(\n        `PDFs gerados: ${result.successes.length}${\n          result.failures.length ? ` | Falhas: ${result.failures.join(\", \")}` : \"\"\n        }.`\n      );\n    } catch (err: any) {\n      setStatusMessage(err.message ?? \"Erro ao gerar PDFs.\");\n    }\n  };\n\n  const handleClone = async (agendamento: Agendamento) => {\r\n    try {\r\n      await cloneAgendamento(agendamento.id);\r\n      refresh(\"Agendamento clonado.\");\r\n    } catch (err: any) {\r\n      setStatusMessage(err.message ?? \"Erro ao clonar agendamento.\");\r\n    }\r\n  };\r\n\r\n  const handleToggleStatus = async (agendamento: Agendamento) => {\r\n    try {\r\n      if (agendamento.ativo) {\r\n        await pauseAgendamento(agendamento.id);\r\n        refresh(\"Agendamento pausado.\");\r\n      } else {\r\n        await resumeAgendamento(agendamento.id);\r\n        refresh(\"Agendamento retomado.\");\r\n      }\r\n    } catch (err: any) {\r\n      setStatusMessage(err.message ?? \"Erro ao alterar status.\");\r\n    }\r\n  };\r\n\r\n  const handleSendNow = async (agendamento: Agendamento) => {\r\n    if (!confirm(`Enviar o SLA do grupo ${agendamento.nome_grupo} agora?`)) return;\r\n    try {\r\n      await sendAgendamentoNow(agendamento.id);\r\n      refresh(`Envio imediato disparado para ${agendamento.nome_grupo}.`);\r\n    } catch (err: any) {\r\n      setError(err.message ?? \"Erro ao enviar imediatamente.\");\r\n    }\r\n  };\r\n\r\n  const openLogs = (agendamento: Agendamento) => setLogsState({ open: true, agendamento });\r\n  const closeLogs = () => setLogsState({ open: false });\r\n\r\n  const openTemplateConfirm = () => setTemplateState((prev) => ({ ...prev, confirm: true }));\r\n  const closeTemplateConfirm = () => setTemplateState((prev) => ({ ...prev, confirm: false }));\r\n\r\n  const ensureTemplateLoaded = async () => {\r\n    setTemplateState((prev) => ({ ...prev, loading: true, error: null }));\r\n    try {\r\n      const template = await fetchSlaTemplate();\r\n      setTemplateState((prev) => ({ ...prev, data: template }));\r\n    } catch (err: any) {\r\n      setTemplateState((prev) => ({ ...prev, error: err.message ?? \"Erro ao carregar template.\" }));\r\n    } finally {\r\n      setTemplateState((prev) => ({ ...prev, loading: false }));\r\n    }\r\n  };\r\n\r\n  const openTemplateModal = async () => {\r\n    closeTemplateConfirm();\r\n    setTemplateState((prev) => ({ ...prev, open: true }));\r\n    if (!templateState.data) {\r\n      await ensureTemplateLoaded();\r\n    }\r\n  };\r\n\r\n  const closeTemplateModal = () => setTemplateState((prev) => ({ ...prev, open: false }));\r\n\r\n  const handleTemplateSave = async (template: SlaTemplate) => {\r\n    setTemplateState((prev) => ({ ...prev, saving: true, error: null }));\r\n    try {\r\n      const updated = await updateSlaTemplate(template);\r\n      setTemplateState((prev) => ({ ...prev, data: updated }));\r\n      setStatusMessage(\"Template atualizado com sucesso.\");\r\n      closeTemplateModal();\r\n    } catch (err: any) {\r\n      setTemplateState((prev) => ({ ...prev, error: err.message ?? \"Erro ao salvar template.\" }));\r\n    } finally {\r\n      setTemplateState((prev) => ({ ...prev, saving: false }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      <header className=\"flex flex-wrap items-center justify-between gap-4\">\r\n        <div>\r\n          <p className=\"text-sm uppercase tracking-wide text-textMuted/70\">Operações</p>\r\n          <h1 className=\"text-3xl font-semibold text-white\">Envio SLA</h1>\r\n          <p className=\"text-sm text-textMuted\">Gerencie agendamentos, templates e logs de envio.</p>\r\n        </div>\r\n        <div className=\"flex items-center gap-3\">\n          <button\n            type=\"button\"\n            onClick={openTemplateConfirm}\n            className={`${ACCENT_BUTTON_CLASS} rounded-xl px-4 py-2 text-sm`}\n          >\n            Configurações\n          </button>\n          <button\n            type=\"button\"\n            onClick={openCreateModal}\n            className={`${ACCENT_BUTTON_CLASS} rounded-xl px-5 py-2 text-sm`}\n          >\n            Novo Agendamento SLA\n          </button>\n        </div>\n      </header>\r\n\r\n      {statusMessage && (\r\n        <div className=\"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-4 py-2 text-sm text-emerald-200\">\r\n          {statusMessage}\r\n        </div>\r\n      )}\r\n\r\n      <section className=\"rounded-2xl border border-border/80 bg-surface/70 p-4 shadow-panel\">\r\n        <button\n          type=\"button\"\n          onClick={() => setShowFilters((prev) => !prev)}\n          className={`flex w-full items-center justify-between rounded-xl px-4 py-2 text-left text-sm ${ACCENT_BUTTON_CLASS}`}\n        >\n          <span>Filtro avançado</span>\n          <span>{showFilters ? \"−\" : \"+\"}</span>\n        </button>\n        {showFilters && (\r\n          <form className=\"mt-4 grid gap-3 md:grid-cols-2\" onSubmit={handleApplyFilters}>\r\n            <label className=\"flex flex-col text-sm\">\r\n              Grupo\r\n              <input\r\n                className=\"mt-1 rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\r\n                value={pendingFilters.grupo}\r\n                onChange={(e) => setPendingFilters((prev) => ({ ...prev, grupo: e.target.value }))}\r\n              />\r\n            </label>\r\n            <label className=\"flex flex-col text-sm\">\r\n              CR\r\n              <input\r\n                className=\"mt-1 rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\r\n                value={pendingFilters.cr}\r\n                onChange={(e) => setPendingFilters((prev) => ({ ...prev, cr: e.target.value }))}\r\n              />\r\n            </label>\r\n            <label className=\"flex flex-col text-sm\">\r\n              Tipo de envio\r\n              <select\r\n                className=\"mt-1 rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\r\n                value={pendingFilters.tipo_envio}\r\n                onChange={(e) => setPendingFilters((prev) => ({ ...prev, tipo_envio: e.target.value }))}\r\n              >\r\n                <option value=\"\">Todos</option>\r\n                {tipoEnvioOptions.map((opt) => (\r\n                  <option key={opt.value} value={opt.value}>\r\n                    {opt.label}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n            <label className=\"flex flex-col text-sm\">\r\n              Status\r\n              <select\r\n                className=\"mt-1 rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\r\n                value={pendingFilters.status}\r\n                onChange={(e) => setPendingFilters((prev) => ({ ...prev, status: e.target.value }))}\r\n              >\r\n                <option value=\"todos\">Todos</option>\r\n                <option value=\"ativos\">Ativos</option>\r\n                <option value=\"pausados\">Pausados</option>\r\n              </select>\r\n            </label>\r\n            <label className=\"flex flex-col text-sm\">\r\n              Dia da semana\r\n              <select\r\n                className=\"mt-1 rounded-lg border border-border bg-surface px-3 py-2 text-sm text-text\"\r\n                value={pendingFilters.dia}\r\n                onChange={(e) => setPendingFilters((prev) => ({ ...prev, dia: e.target.value }))}\r\n              >\r\n                <option value=\"\">Todos</option>\r\n                <option value=\"seg\">Seg</option>\r\n                <option value=\"ter\">Ter</option>\r\n                <option value=\"qua\">Qua</option>\r\n                <option value=\"qui\">Qui</option>\r\n                <option value=\"sex\">Sex</option>\r\n                <option value=\"sab\">Sáb</option>\r\n                <option value=\"dom\">Dom</option>\r\n              </select>\r\n            </label>\r\n            <div className=\"flex items-end gap-3\">\n              <button\n                type=\"submit\"\n                className={`flex-1 rounded-xl px-4 py-2 text-sm ${ACCENT_BUTTON_CLASS}`}\n              >\n                Aplicar filtros\n              </button>\n              <button\n                type=\"button\"\n                onClick={handleResetFilters}\n                className={`rounded-xl px-4 py-2 text-sm ${ACCENT_BUTTON_CLASS}`}\n              >\n                Limpar\n              </button>\n            </div>\n          </form>\r\n        )}\r\n      </section>\r\n\r\n      <section className=\"rounded-2xl border border-border/70 bg-surface/80 p-4 shadow-panel\">\r\n        {error && (\r\n          <p className=\"mb-4 rounded-lg border border-rose-500/30 bg-rose-500/10 px-3 py-2 text-sm text-rose-200\">\r\n            {error}\r\n          </p>\r\n        )}\r\n        {loading ? (\r\n          <div className=\"animate-pulse rounded-xl border border-border/60 bg-surfaceMuted/40 p-6 text-center text-textMuted\">\r\n            Carregando agendamentos...\r\n          </div>\r\n        ) : (\n          <div className=\"overflow-x-auto\">\n            <div className=\"mb-3 flex flex-wrap items-center justify-between gap-3 text-sm text-text\">\n              <span>{hasSelection ? `${selectedIds.length} selecionado(s)` : \"Nenhum agendamento selecionado\"}</span>\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  type=\"button\"\n                  disabled={!hasSelection}\n                  onClick={handleBulkGeneratePdf}\n                  className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                >\n                  Gerar PDF\n                </button>\n                <button\n                  type=\"button\"\n                  disabled={!hasSelection}\n                  onClick={handleBulkDelete}\n                  className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                >\n                  Deletar\n                </button>\n              </div>\n            </div>\n            <table className=\"w-full min-w-[680px] border-collapse text-sm text-text\">\n              <thead className=\"bg-surfaceMuted/60 text-xs uppercase tracking-wide text-textMuted\">\n                <tr>\n                  <th className=\"px-3 py-2 text-center\">\n                    <input\n                      type=\"checkbox\"\n                      className=\"h-4 w-4 accent-accent\"\n                      checked={isAllSelected && allIds.length > 0}\n                      onChange={toggleSelectAll}\n                      aria-label=\"Selecionar todos\"\n                    />\n                  </th>\n                  <th className=\"px-3 py-2 text-left\">Grupo</th>\n                  <th className=\"px-3 py-2 text-left\">CR</th>\n                  <th className=\"px-3 py-2 text-left\">Tipo</th>\n                  <th className=\"px-3 py-2 text-left\">Dias</th>\n                  <th className=\"px-3 py-2 text-left\">Janela</th>\n                  <th className=\"px-3 py-2 text-left\">Próximo envio</th>\r\n                  <th className=\"px-3 py-2 text-left\">Status</th>\r\n                  <th className=\"px-3 py-2 text-left\">Último envio</th>\r\n                  <th className=\"px-3 py-2 text-center\">Ações</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {agendamentos.map((item) => (\n                  <tr key={item.id} className=\"border-b border-border/40 text-sm\">\n                    <td className=\"px-3 py-2 text-center\">\n                      <input\n                        type=\"checkbox\"\n                        className=\"h-4 w-4 accent-accent\"\n                        checked={selectedIds.includes(item.id)}\n                        onChange={() => toggleSelect(item.id)}\n                        aria-label={`Selecionar ${item.nome_grupo}`}\n                      />\n                    </td>\n                    <td className=\"px-3 py-2 font-medium text-white\">{item.nome_grupo}</td>\n                    <td className=\"px-3 py-2 text-textMuted\">{item.cr ?? \"--\"}</td>\r\n                    <td className=\"px-3 py-2 capitalize\">{item.tipo_envio}</td>\r\n                    <td className=\"px-3 py-2 text-textMuted\">\r\n                      {item.dias_semana ? item.dias_semana.split(\",\").map((d) => d.trim()).join(\", \") : \"--\"}\r\n                    </td>\r\n                    <td className=\"px-3 py-2 text-textMuted\">\r\n                      {item.hora_inicio?.slice(0, 5)} / {item.hora_fim?.slice(0, 5)}\r\n                    </td>\r\n                    <td className=\"px-3 py-2 text-textMuted\">{item.proximo_envio ?? \"--\"}</td>\r\n                    <td className=\"px-3 py-2\">\r\n                      <span\r\n                        className={`rounded-full px-2 py-1 text-xs font-semibold ${\r\n                          item.ativo ? \"bg-emerald-500/20 text-emerald-300\" : \"bg-amber-500/20 text-amber-200\"\r\n                        }`}\r\n                      >\r\n                        {item.ativo ? \"Ativo\" : \"Pausado\"}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-3 py-2 text-textMuted\">\r\n                      {item.ultimo_status ? (\r\n                        <span>\r\n                          {item.ultimo_status}{\" \"}\r\n                          {item.ultimo_envio && <span className=\"text-xs text-textMuted/70\">({item.ultimo_envio})</span>}\r\n                        </span>\r\n                      ) : (\r\n                        \"--\"\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-3 py-2\">\n                      <div className=\"flex flex-wrap items-center justify-center gap-2 text-xs\">\n                        <button\n                          className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                          onClick={() => openEditModal(item)}\n                        >\n                          Editar\n                        </button>\n                        <button\n                          className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                          onClick={() => handleClone(item)}\n                        >\n                          Clonar\n                        </button>\n                        <button\n                          className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                          onClick={() => handleGeneratePdf(item.id)}\n                        >\n                          Gerar PDF\n                        </button>\n                        <button\n                          className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                          onClick={() => handleToggleStatus(item)}\n                        >\n                          {item.ativo ? \"Pausar\" : \"Retomar\"}\n                        </button>\n                        <button\n                          className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                          onClick={() => handleSendNow(item)}\n                        >\n                          Enviar agora\n                        </button>\n                        <button\n                          className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                          onClick={() => openLogs(item)}\n                        >\n                          Logs\n                        </button>\n                        <button\n                          className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-xs`}\n                          onClick={() => handleDelete(item)}\n                        >\n                          Excluir\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\r\n                ))}\r\n                {!agendamentos.length && !loading && (\n                  <tr>\n                    <td className=\"px-3 py-6 text-center text-textMuted\" colSpan={10}>\n                      Nenhum agendamento encontrado com os filtros atuais.\n                    </td>\n                  </tr>\n                )}\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )}\r\n      </section>\r\n\r\n      <div className=\"flex flex-wrap items-center justify-between gap-3 text-sm text-textMuted\">\r\n        <div>\r\n          Página {page} de {totalPages} • {total} registros\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\n          <button\n            type=\"button\"\n            disabled={page <= 1}\n            onClick={() => setPage((prev) => Math.max(1, prev - 1))}\n            className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-sm`}\n          >\n            Anterior\n          </button>\n          <button\n            type=\"button\"\n            disabled={page >= totalPages}\n            onClick={() => setPage((prev) => Math.min(totalPages, prev + 1))}\n            className={`${ACCENT_BUTTON_CLASS} rounded-lg px-3 py-1 text-sm`}\n          >\n            Próxima\n          </button>\n          <select\r\n            value={pageSize}\r\n            onChange={(e) => {\r\n              setPageSize(Number(e.target.value));\r\n              setPage(1);\r\n            }}\r\n            className=\"rounded-lg border border-border bg-surface px-2 py-1 text-text\"\r\n          >\r\n            {[10, 20, 50].map((size) => (\r\n              <option key={size} value={size}>\r\n                {size}/página\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {modal.open && (\r\n        <AgendamentoModal\r\n          mode={modal.mode}\r\n          agendamento={modal.agendamento ?? undefined}\r\n          onClose={closeModal}\r\n          onSaved={(message) => {\r\n            closeModal();\r\n            refresh(message);\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {logsState.open && logsState.agendamento && (\r\n        <LogsModal agendamento={logsState.agendamento} onClose={closeLogs} />\r\n      )}\r\n\r\n      {templateState.confirm && (\r\n        <ConfirmModal\r\n          title=\"Alterar template?\"\r\n          description=\"Atualizar o template afetará todos os agendamentos já existentes. Deseja continuar?\"\r\n          confirmLabel=\"Sim, editar template\"\r\n          cancelLabel=\"Cancelar\"\r\n          onConfirm={openTemplateModal}\r\n          onCancel={closeTemplateConfirm}\r\n        />\r\n      )}\r\n\r\n      {templateState.open && (\r\n        <TemplateModal\r\n          template={templateState.data}\r\n          loading={templateState.loading}\r\n          saving={templateState.saving}\r\n          error={templateState.error}\r\n          variables={templateVariables}\r\n          onRetry={ensureTemplateLoaded}\r\n          onClose={closeTemplateModal}\r\n          onSave={handleTemplateSave}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAgBA;AACA;AACA;AACA;AACA;AAvBA;;;;;;;;;AAyBA,MAAM,sBACJ;AAsBa,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;QACrC,OAAO;QACP,IAAI;QACJ,YAAY;QACZ,QAAQ;QACR,KAAK;IACP;IACA,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,6NAAQ,EAAC;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,6NAAQ,EAAgB,EAAE;IAClE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAgB;IAClD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6NAAQ,EAAgB;IAClE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6NAAQ,EAAW,EAAE;IAC3D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,6NAAQ,EAAC;IAC/C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAa;QAAE,MAAM;QAAO,MAAM;IAAS;IAC7E,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6NAAQ,EAAY;QAAE,MAAM;IAAM;IACpE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,6NAAQ,EAAgB;QAChE,MAAM;QACN,SAAS;QACT,MAAM;QACN,SAAS;QACT,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,aAAa,IAAA,4NAAO,EAAC,IAAM,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,QAAQ,YAAY;QAAC;QAAO;KAAS;IAE5F,MAAM,oBAAoB;QACxB,WAAW;QACX,SAAS;QACT,IAAI;YACF,MAAM,UAA8B;gBAClC;gBACA,WAAW;gBACX,OAAO,QAAQ,KAAK,IAAI;gBACxB,IAAI,QAAQ,EAAE,IAAI;gBAClB,YAAY,QAAQ,UAAU,IAAI;gBAClC,KAAK,QAAQ,GAAG,IAAI;YACtB;YACA,IAAI,QAAQ,MAAM,KAAK,UAAU,QAAQ,KAAK,GAAG;YACjD,IAAI,QAAQ,MAAM,KAAK,YAAY,QAAQ,KAAK,GAAG;YACnD,MAAM,WAAW,MAAM,IAAA,8IAAoB,EAAC;YAC5C,gBAAgB,SAAS,KAAK;YAC9B,SAAS,SAAS,KAAK;QACzB,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAA,8NAAS,EAAC;QACR;IACA,uDAAuD;IACzD,GAAG;QAAC;QAAM;QAAU;KAAQ;IAE5B,IAAA,8NAAS,EAAC;QACR,eAAe,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,KAAO,aAAa,IAAI,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK;IACvF,GAAG;QAAC;KAAa;IAEjB,MAAM,SAAS,IAAA,4NAAO,EAAC,IAAM,aAAa,GAAG,CAAC,CAAC,OAAS,KAAK,EAAE,GAAG;QAAC;KAAa;IAChF,MAAM,gBAAgB,OAAO,MAAM,GAAG,KAAK,OAAO,KAAK,CAAC,CAAC,KAAO,YAAY,QAAQ,CAAC;IACrF,MAAM,eAAe,YAAY,MAAM,GAAG;IAE1C,MAAM,eAAe,CAAC;QACpB,eAAe,CAAC,OAAU,KAAK,QAAQ,CAAC,MAAM,KAAK,MAAM,CAAC,CAAC,OAAS,SAAS,MAAM;mBAAI;gBAAM;aAAG;IAClG;IAEA,MAAM,kBAAkB;QACtB,IAAI,CAAC,OAAO,MAAM,EAAE;QACpB,IAAI,eAAe;YACjB,eAAe,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,KAAO,CAAC,OAAO,QAAQ,CAAC;QAChE,OAAO;YACL,eAAe,CAAC,OAAS,MAAM,IAAI,CAAC,IAAI,IAAI;uBAAI;uBAAS;iBAAO;QAClE;IACF;IAEA,MAAM,iBAAiB,IAAM,eAAe,EAAE;IAE9C,MAAM,UAAU,OAAO;QACrB,MAAM;QACN,IAAI,SAAS;YACX,iBAAiB;YACjB,WAAW,IAAM,iBAAiB,OAAO;QAC3C;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,MAAM,cAAc;QACpB,WAAW;QACX,QAAQ;IACV;IAEA,MAAM,qBAAqB;QACzB,MAAM,QAAQ;YAAE,OAAO;YAAI,IAAI;YAAI,YAAY;YAAI,QAAQ;YAAS,KAAK;QAAG;QAC5E,kBAAkB;QAClB,WAAW;QACX,QAAQ;IACV;IAEA,MAAM,kBAAkB,IAAM,SAAS;YAAE,MAAM;YAAM,MAAM;QAAS;IACpE,MAAM,gBAAgB,CAAC,cAA6B,SAAS;YAAE,MAAM;YAAM,MAAM;YAAQ;QAAY;IACrG,MAAM,aAAa,IAAM,SAAS;YAAE,MAAM;YAAO,MAAM;YAAU,aAAa;QAAU;IAExF,MAAM,eAAe,OAAO;QAC1B,IAAI,CAAC,QAAQ,CAAC,+BAA+B,EAAE,YAAY,UAAU,CAAC,CAAC,CAAC,GAAG;QAC3E,IAAI;YACF,MAAM,IAAA,2IAAiB,EAAC,YAAY,EAAE;YACtC,eAAe,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,QAAU,UAAU,YAAY,EAAE;YACxE,QAAQ;QACV,EAAE,OAAO,KAAU;YACjB,iBAAiB,IAAI,OAAO,IAAI;QAClC;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,cAAc;QACnB,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,YAAY,MAAM,CAAC,+BAA+B,CAAC,GAAG;QAC9E,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,gJAAsB,EAAC;YAC9C,iBACE,CAAC,wBAAwB,EAAE,SAAS,OAAO,GACzC,SAAS,QAAQ,CAAC,MAAM,GAAG,CAAC,WAAW,EAAE,SAAS,QAAQ,CAAC,IAAI,CAAC,OAAO,GAAG,GAC3E,CAAC,CAAC;YAEL;YACA;QACF,EAAE,OAAO,KAAU;YACjB,iBAAiB,IAAI,OAAO,IAAI;QAClC;IACF;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,gJAAsB,EAAC;YAC5C,OAAO,IAAI,CAAC,OAAO,GAAG,EAAE,UAAU;YAClC,iBAAiB;QACnB,EAAE,OAAO,KAAU;YACjB,iBAAiB,IAAI,OAAO,IAAI;QAClC;IACF;IAEA,MAAM,wBAAwB;QAC5B,IAAI,CAAC,cAAc;QACnB,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,yIAAe,EAAC;YACrC,OAAO,SAAS,CAAC,OAAO,CAAC,CAAC,EAAE,GAAG,EAAE,GAAK,OAAO,IAAI,CAAC,KAAK,UAAU;YACjE,iBACE,CAAC,cAAc,EAAE,OAAO,SAAS,CAAC,MAAM,GACtC,OAAO,QAAQ,CAAC,MAAM,GAAG,CAAC,WAAW,EAAE,OAAO,QAAQ,CAAC,IAAI,CAAC,OAAO,GAAG,GACvE,CAAC,CAAC;QAEP,EAAE,OAAO,KAAU;YACjB,iBAAiB,IAAI,OAAO,IAAI;QAClC;IACF;IAEA,MAAM,cAAc,OAAO;QACzB,IAAI;YACF,MAAM,IAAA,0IAAgB,EAAC,YAAY,EAAE;YACrC,QAAQ;QACV,EAAE,OAAO,KAAU;YACjB,iBAAiB,IAAI,OAAO,IAAI;QAClC;IACF;IAEA,MAAM,qBAAqB,OAAO;QAChC,IAAI;YACF,IAAI,YAAY,KAAK,EAAE;gBACrB,MAAM,IAAA,0IAAgB,EAAC,YAAY,EAAE;gBACrC,QAAQ;YACV,OAAO;gBACL,MAAM,IAAA,2IAAiB,EAAC,YAAY,EAAE;gBACtC,QAAQ;YACV;QACF,EAAE,OAAO,KAAU;YACjB,iBAAiB,IAAI,OAAO,IAAI;QAClC;IACF;IAEA,MAAM,gBAAgB,OAAO;QAC3B,IAAI,CAAC,QAAQ,CAAC,sBAAsB,EAAE,YAAY,UAAU,CAAC,OAAO,CAAC,GAAG;QACxE,IAAI;YACF,MAAM,IAAA,4IAAkB,EAAC,YAAY,EAAE;YACvC,QAAQ,CAAC,8BAA8B,EAAE,YAAY,UAAU,CAAC,CAAC,CAAC;QACpE,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B;IACF;IAEA,MAAM,WAAW,CAAC,cAA6B,aAAa;YAAE,MAAM;YAAM;QAAY;IACtF,MAAM,YAAY,IAAM,aAAa;YAAE,MAAM;QAAM;IAEnD,MAAM,sBAAsB,IAAM,iBAAiB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,SAAS;YAAK,CAAC;IACxF,MAAM,uBAAuB,IAAM,iBAAiB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,SAAS;YAAM,CAAC;IAE1F,MAAM,uBAAuB;QAC3B,iBAAiB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,SAAS;gBAAM,OAAO;YAAK,CAAC;QACnE,IAAI;YACF,MAAM,WAAW,MAAM,IAAA,0IAAgB;YACvC,iBAAiB,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,MAAM;gBAAS,CAAC;QACzD,EAAE,OAAO,KAAU;YACjB,iBAAiB,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,OAAO,IAAI,OAAO,IAAI;gBAA6B,CAAC;QAC7F,SAAU;YACR,iBAAiB,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,SAAS;gBAAM,CAAC;QACzD;IACF;IAEA,MAAM,oBAAoB;QACxB;QACA,iBAAiB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,MAAM;YAAK,CAAC;QACnD,IAAI,CAAC,cAAc,IAAI,EAAE;YACvB,MAAM;QACR;IACF;IAEA,MAAM,qBAAqB,IAAM,iBAAiB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,MAAM;YAAM,CAAC;IAErF,MAAM,qBAAqB,OAAO;QAChC,iBAAiB,CAAC,OAAS,CAAC;gBAAE,GAAG,IAAI;gBAAE,QAAQ;gBAAM,OAAO;YAAK,CAAC;QAClE,IAAI;YACF,MAAM,UAAU,MAAM,IAAA,2IAAiB,EAAC;YACxC,iBAAiB,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,MAAM;gBAAQ,CAAC;YACtD,iBAAiB;YACjB;QACF,EAAE,OAAO,KAAU;YACjB,iBAAiB,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,OAAO,IAAI,OAAO,IAAI;gBAA2B,CAAC;QAC3F,SAAU;YACR,iBAAiB,CAAC,OAAS,CAAC;oBAAE,GAAG,IAAI;oBAAE,QAAQ;gBAAM,CAAC;QACxD;IACF;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAO,WAAU;;kCAChB,0PAAC;;0CACC,0PAAC;gCAAE,WAAU;0CAAoD;;;;;;0CACjE,0PAAC;gCAAG,WAAU;0CAAoC;;;;;;0CAClD,0PAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAExC,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;0CACjE;;;;;;0CAGD,0PAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;0CACjE;;;;;;;;;;;;;;;;;;YAMJ,+BACC,0PAAC;gBAAI,WAAU;0BACZ;;;;;;0BAIL,0PAAC;gBAAQ,WAAU;;kCACjB,0PAAC;wBACC,MAAK;wBACL,SAAS,IAAM,eAAe,CAAC,OAAS,CAAC;wBACzC,WAAW,CAAC,gFAAgF,EAAE,qBAAqB;;0CAEnH,0PAAC;0CAAK;;;;;;0CACN,0PAAC;0CAAM,cAAc,MAAM;;;;;;;;;;;;oBAE5B,6BACC,0PAAC;wBAAK,WAAU;wBAAiC,UAAU;;0CACzD,0PAAC;gCAAM,WAAU;;oCAAwB;kDAEvC,0PAAC;wCACC,WAAU;wCACV,OAAO,eAAe,KAAK;wCAC3B,UAAU,CAAC,IAAM,kBAAkB,CAAC,OAAS,CAAC;oDAAE,GAAG,IAAI;oDAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;;;;;;;;;;;;0CAGpF,0PAAC;gCAAM,WAAU;;oCAAwB;kDAEvC,0PAAC;wCACC,WAAU;wCACV,OAAO,eAAe,EAAE;wCACxB,UAAU,CAAC,IAAM,kBAAkB,CAAC,OAAS,CAAC;oDAAE,GAAG,IAAI;oDAAE,IAAI,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;;;;;;;;;;;;0CAGjF,0PAAC;gCAAM,WAAU;;oCAAwB;kDAEvC,0PAAC;wCACC,WAAU;wCACV,OAAO,eAAe,UAAU;wCAChC,UAAU,CAAC,IAAM,kBAAkB,CAAC,OAAS,CAAC;oDAAE,GAAG,IAAI;oDAAE,YAAY,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;;0DAErF,0PAAC;gDAAO,OAAM;0DAAG;;;;;;4CAChB,uKAAgB,CAAC,GAAG,CAAC,CAAC,oBACrB,0PAAC;oDAAuB,OAAO,IAAI,KAAK;8DACrC,IAAI,KAAK;mDADC,IAAI,KAAK;;;;;;;;;;;;;;;;;0CAM5B,0PAAC;gCAAM,WAAU;;oCAAwB;kDAEvC,0PAAC;wCACC,WAAU;wCACV,OAAO,eAAe,MAAM;wCAC5B,UAAU,CAAC,IAAM,kBAAkB,CAAC,OAAS,CAAC;oDAAE,GAAG,IAAI;oDAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;;0DAEjF,0PAAC;gDAAO,OAAM;0DAAQ;;;;;;0DACtB,0PAAC;gDAAO,OAAM;0DAAS;;;;;;0DACvB,0PAAC;gDAAO,OAAM;0DAAW;;;;;;;;;;;;;;;;;;0CAG7B,0PAAC;gCAAM,WAAU;;oCAAwB;kDAEvC,0PAAC;wCACC,WAAU;wCACV,OAAO,eAAe,GAAG;wCACzB,UAAU,CAAC,IAAM,kBAAkB,CAAC,OAAS,CAAC;oDAAE,GAAG,IAAI;oDAAE,KAAK,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;;0DAE9E,0PAAC;gDAAO,OAAM;0DAAG;;;;;;0DACjB,0PAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,0PAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,0PAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,0PAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,0PAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,0PAAC;gDAAO,OAAM;0DAAM;;;;;;0DACpB,0PAAC;gDAAO,OAAM;0DAAM;;;;;;;;;;;;;;;;;;0CAGxB,0PAAC;gCAAI,WAAU;;kDACb,0PAAC;wCACC,MAAK;wCACL,WAAW,CAAC,oCAAoC,EAAE,qBAAqB;kDACxE;;;;;;kDAGD,0PAAC;wCACC,MAAK;wCACL,SAAS;wCACT,WAAW,CAAC,6BAA6B,EAAE,qBAAqB;kDACjE;;;;;;;;;;;;;;;;;;;;;;;;0BAQT,0PAAC;gBAAQ,WAAU;;oBAChB,uBACC,0PAAC;wBAAE,WAAU;kCACV;;;;;;oBAGJ,wBACC,0PAAC;wBAAI,WAAU;kCAAqG;;;;;6CAIpH,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCAAI,WAAU;;kDACb,0PAAC;kDAAM,eAAe,GAAG,YAAY,MAAM,CAAC,eAAe,CAAC,GAAG;;;;;;kDAC/D,0PAAC;wCAAI,WAAU;;0DACb,0PAAC;gDACC,MAAK;gDACL,UAAU,CAAC;gDACX,SAAS;gDACT,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;0DACjE;;;;;;0DAGD,0PAAC;gDACC,MAAK;gDACL,UAAU,CAAC;gDACX,SAAS;gDACT,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;0DACjE;;;;;;;;;;;;;;;;;;0CAKL,0PAAC;gCAAM,WAAU;;kDACf,0PAAC;wCAAM,WAAU;kDACf,cAAA,0PAAC;;8DACC,0PAAC;oDAAG,WAAU;8DACZ,cAAA,0PAAC;wDACC,MAAK;wDACL,WAAU;wDACV,SAAS,iBAAiB,OAAO,MAAM,GAAG;wDAC1C,UAAU;wDACV,cAAW;;;;;;;;;;;8DAGf,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAsB;;;;;;8DACpC,0PAAC;oDAAG,WAAU;8DAAwB;;;;;;;;;;;;;;;;;kDAG1C,0PAAC;;4CACE,aAAa,GAAG,CAAC,CAAC,qBACjB,0PAAC;oDAAiB,WAAU;;sEAC1B,0PAAC;4DAAG,WAAU;sEACZ,cAAA,0PAAC;gEACC,MAAK;gEACL,WAAU;gEACV,SAAS,YAAY,QAAQ,CAAC,KAAK,EAAE;gEACrC,UAAU,IAAM,aAAa,KAAK,EAAE;gEACpC,cAAY,CAAC,WAAW,EAAE,KAAK,UAAU,EAAE;;;;;;;;;;;sEAG/C,0PAAC;4DAAG,WAAU;sEAAoC,KAAK,UAAU;;;;;;sEACjE,0PAAC;4DAAG,WAAU;sEAA4B,KAAK,EAAE,IAAI;;;;;;sEACrD,0PAAC;4DAAG,WAAU;sEAAwB,KAAK,UAAU;;;;;;sEACrD,0PAAC;4DAAG,WAAU;sEACX,KAAK,WAAW,GAAG,KAAK,WAAW,CAAC,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,IAAI,IAAI,IAAI,CAAC,QAAQ;;;;;;sEAEpF,0PAAC;4DAAG,WAAU;;gEACX,KAAK,WAAW,EAAE,MAAM,GAAG;gEAAG;gEAAI,KAAK,QAAQ,EAAE,MAAM,GAAG;;;;;;;sEAE7D,0PAAC;4DAAG,WAAU;sEAA4B,KAAK,aAAa,IAAI;;;;;;sEAChE,0PAAC;4DAAG,WAAU;sEACZ,cAAA,0PAAC;gEACC,WAAW,CAAC,6CAA6C,EACvD,KAAK,KAAK,GAAG,uCAAuC,kCACpD;0EAED,KAAK,KAAK,GAAG,UAAU;;;;;;;;;;;sEAG5B,0PAAC;4DAAG,WAAU;sEACX,KAAK,aAAa,iBACjB,0PAAC;;oEACE,KAAK,aAAa;oEAAE;oEACpB,KAAK,YAAY,kBAAI,0PAAC;wEAAK,WAAU;;4EAA4B;4EAAE,KAAK,YAAY;4EAAC;;;;;;;;;;;;uEAGxF;;;;;;sEAGJ,0PAAC;4DAAG,WAAU;sEACZ,cAAA,0PAAC;gEAAI,WAAU;;kFACb,0PAAC;wEACC,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;wEAChE,SAAS,IAAM,cAAc;kFAC9B;;;;;;kFAGD,0PAAC;wEACC,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;wEAChE,SAAS,IAAM,YAAY;kFAC5B;;;;;;kFAGD,0PAAC;wEACC,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;wEAChE,SAAS,IAAM,kBAAkB,KAAK,EAAE;kFACzC;;;;;;kFAGD,0PAAC;wEACC,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;wEAChE,SAAS,IAAM,mBAAmB;kFAEjC,KAAK,KAAK,GAAG,WAAW;;;;;;kFAE3B,0PAAC;wEACC,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;wEAChE,SAAS,IAAM,cAAc;kFAC9B;;;;;;kFAGD,0PAAC;wEACC,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;wEAChE,SAAS,IAAM,SAAS;kFACzB;;;;;;kFAGD,0PAAC;wEACC,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;wEAChE,SAAS,IAAM,aAAa;kFAC7B;;;;;;;;;;;;;;;;;;mDAhFE,KAAK,EAAE;;;;;4CAuFjB,CAAC,aAAa,MAAM,IAAI,CAAC,yBACxB,0PAAC;0DACC,cAAA,0PAAC;oDAAG,WAAU;oDAAuC,SAAS;8DAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAWhF,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;;4BAAI;4BACK;4BAAK;4BAAK;4BAAW;4BAAI;4BAAM;;;;;;;kCAEzC,0PAAC;wBAAI,WAAU;;0CACb,0PAAC;gCACC,MAAK;gCACL,UAAU,QAAQ;gCAClB,SAAS,IAAM,QAAQ,CAAC,OAAS,KAAK,GAAG,CAAC,GAAG,OAAO;gCACpD,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;0CACjE;;;;;;0CAGD,0PAAC;gCACC,MAAK;gCACL,UAAU,QAAQ;gCAClB,SAAS,IAAM,QAAQ,CAAC,OAAS,KAAK,GAAG,CAAC,YAAY,OAAO;gCAC7D,WAAW,GAAG,oBAAoB,6BAA6B,CAAC;0CACjE;;;;;;0CAGD,0PAAC;gCACC,OAAO;gCACP,UAAU,CAAC;oCACT,YAAY,OAAO,EAAE,MAAM,CAAC,KAAK;oCACjC,QAAQ;gCACV;gCACA,WAAU;0CAET;oCAAC;oCAAI;oCAAI;iCAAG,CAAC,GAAG,CAAC,CAAC,qBACjB,0PAAC;wCAAkB,OAAO;;4CACvB;4CAAK;;uCADK;;;;;;;;;;;;;;;;;;;;;;YAQpB,MAAM,IAAI,kBACT,0PAAC,sKAAgB;gBACf,MAAM,MAAM,IAAI;gBAChB,aAAa,MAAM,WAAW,IAAI;gBAClC,SAAS;gBACT,SAAS,CAAC;oBACR;oBACA,QAAQ;gBACV;;;;;;YAIH,UAAU,IAAI,IAAI,UAAU,WAAW,kBACtC,0PAAC,+JAAS;gBAAC,aAAa,UAAU,WAAW;gBAAE,SAAS;;;;;;YAGzD,cAAc,OAAO,kBACpB,0PAAC,kKAAY;gBACX,OAAM;gBACN,aAAY;gBACZ,cAAa;gBACb,aAAY;gBACZ,WAAW;gBACX,UAAU;;;;;;YAIb,cAAc,IAAI,kBACjB,0PAAC,mKAAa;gBACZ,UAAU,cAAc,IAAI;gBAC5B,SAAS,cAAc,OAAO;gBAC9B,QAAQ,cAAc,MAAM;gBAC5B,OAAO,cAAc,KAAK;gBAC1B,WAAW,wKAAiB;gBAC5B,SAAS;gBACT,SAAS;gBACT,QAAQ;;;;;;;;;;;;AAKlB"}}]
}